## Введение

> Поскольку мир выходит на многоплатформенную платформу со всеми новыми мобильными операционными системами, MultiMarkdown предоставляет простой способ совместного использования форматирования между всеми моими устройствами. Легко учиться (даже для нас смертных) и сразу же полезно.
>
> > \- Дэвид Спаркс, [MacSparky.com](http://macsparky.com/)

### Что такое Markdown?

Чтобы понять, что такое MultiMarkdown, вы сначала должны быть знакомы с [Markdown](http://daringfireball.net/projects/markdown/) . Лучшее описание того, что Markdown происходит от веб-сайта Markdown Джона Грубера:

> Markdown - это инструмент преобразования текста в HTML для веб-писателей. Markdown позволяет писать, используя простой для чтения, простой для записи текстовый формат, а затем преобразовать его в структурно обоснованный XHTML (или HTML).
>
> Таким образом, «Markdown» - это две вещи: (1) синтаксис форматирования простого текста; И (2) программный инструмент, написанный на Perl, который преобразует форматирование простого текста в HTML. См. Страницу «Синтаксис» для деталей, относящихся к синтаксису форматирования Markdown. Вы можете попробовать, прямо сейчас, используя онлайн Dingus.
>
> Главной целью дизайна для синтаксиса форматирования Markdown является сделать его максимально читаемым. Идея заключается в том, что документ в формате Markdown должен быть доступен для публикации как есть, как обычный текст, не выглядя, как будто он был помечен тегами или инструкциями по форматированию. В то время как синтаксис Markdown повлиял на несколько существующих фильтров text-to-HTML, единственным источником вдохновения для синтаксиса Markdown является формат электронной почты простого текста. - [Джон Грубер](http://daringfireball.net/projects/markdown/)

### Что такое MultiMarkdown?

Markdown замечательный, но ему не хватало нескольких функций, которые позволяли бы ему работать с документами, а не только с частями веб-страницы.

Я написал MultiMarkdown, чтобы использовать синтаксис Markdown, но расширять его для работы с полными документами, которые в конечном итоге могут быть преобразованы из текста в другие форматы, включая полные HTML-документы, LaTeX, PDF, ODF или даже (содрогаться) документы Microsoft Word.

Помимо возможности работать с полными документами и преобразования в другие форматы, синтаксис Markdown не хватало нескольких других вещей. Michel Fortin добавил несколько дополнительных синтаксических особенностей при написании [PHP Markdown Extra](http://www.michelf.com/projects/php-markdown/extra/) . Некоторые из его идей были реализованы и расширены в MultiMarkdown, помимо включения функций, недоступных в других реализациях Markdown. Эти функции включают в себя таблицы, сноски, поддержку цитат, атрибуты изображения и ссылок, перекрестные ссылки, математическую поддержку и многое другое.

Джон Грубер может не согласиться со мной, но я действительно старался придерживаться его провозглашенного видения, когда добавлял новый формат синтаксиса для MultiMarkdown. Качество, которое привлекло меня к Markdown, было самым чистым. Чтение простого текстового документа, написанного в Markdown, очень *просто* . Это имеет смысл, и похоже, что это было предназначено для людей, а не для компьютеров. Насколько это возможно, я старался учитывать эту же концепцию при работе над MultiMarkdown.

Я мог или не мог этого добиться ....

В духе множественных определений Markdown вы можете думать о MultiMarkdown как:

1. Программа для преобразования обычного текста в полностью отформатированный документ.
2. Синтаксис, используемый в открытом тексте, чтобы описать, как преобразовать его в полный документ.

### Почему я должен использовать MultiMarkdown?

Запись с помощью MultiMarkdown позволяет отделить содержимое и структуру вашего документа от форматирования. Вы сосредотачиваетесь на фактическом написании, не беспокоясь о том, чтобы стиль стилей заголовков разделов соответствовал или обеспечивал правильное расстояние между абзацами. И с небольшой предусмотрительностью один простой текстовый документ может быть легко преобразован в несколько выходных форматов без необходимости переписывать всю вещь или форматировать ее вручную. Еще лучше, вам не нужно писать в «computer-ese» для создания хорошо отформатированных команд HTML или LaTeX. Вы просто пишете, MultiMarkdown заботится обо всем остальном.

Например, вместо написания:

```
<p>In order to create valid 
<a href="http://en.wikipedia.org/wiki/HTML">HTML</a>, you 
need properly coded syntax that can be cumbersome for 
&#8220;non-programmers&#8221; to write. Sometimes, you
just want to easily make certain words <strong>bold
</strong>, and certain words <em>italicized</em> without
having to remember the syntax. Additionally, for example,
creating lists:</p>

<ul>
<li>should be easy</li>
<li>should not involve programming</li>
</ul>

```

Вы просто пишете:

```
In order to create valid [HTML], you need properly
coded syntax that can be cumbersome for 
"non-programmers" to write. Sometimes, you just want
to easily make certain words **bold**, and certain 
words *italicized* without having to remember the 
syntax. Additionally, for example, creating lists:

* should be easy
* should not involve programming

[HTML]: http://en.wikipedia.org/wiki/HTML

```

Кроме того, вы можете написать документ MultiMarkdown в любом текстовом редакторе в любой операционной системе и знать, что он будет совместим с MultiMarkdown в любой другой операционной системе и обрабатываться на одном выходе. В качестве текстового формата ваши документы будут безопасными независимо от того, сколько раз вы переключаете компьютеры, операционные системы или любимые приложения. Вы всегда сможете открывать и редактировать свои документы, даже если версия программного обеспечения, изначально написанная вами, давно исчезла.

Эти функции побудили нескольких людей использовать MultiMarkdown в процессе написания своих книг, тезисов и бесчисленных других документов.

Есть много других причин использовать MultiMarkdown, но я не буду вовлекать их всех здесь.

*Кстати,* веб-сайт MultiMarkdown, конечно же, создан с использованием MultiMarkdown. Чтобы просмотреть источник MMD для любой страницы, добавьте `.txt`в конец URL-адрес. Если URL-адрес заканчивается `/`, то `index.txt`вместо этого добавьте его в конец. Например, главной страницей MultiMarkdown будет[http://fletcherpenney.net/multimarkdown/index.txt](http://fletcherpenney.net/multimarkdown/index.txt) .

### Где это руководство хранится?

Это Руководство пользователя предназначено для просмотра как одного HTML-документа или PDF-файла после обработки LaTeX. Когда он обрабатывается MultiMarkdown и рассматривается как единый документ, он продемонстрирует многие функции, предлагаемые MultiMarkdown, и должен быть достаточно прост в навигации.

Исходные текстовые документы фактически хранятся в вики на Github, так что документ может быть легко обработан кем-либо с учетной записью Github:

- [https://github.com/fletcher/peg-multimarkdown/wiki/User's-Manual](https://github.com/fletcher/peg-multimarkdown/wiki/User's-Manual)

*Примечание* . В настоящее время программное обеспечение Github wiki поддерживает Markdown, но не MultiMarkdown. Это означает, что определенные функции MultiMarkdown не будут работать в wiki, но будут работать, если источник обрабатывается MultiMarkdown отдельно от вики.

Вы можете загрузить копию исходных файлов, используя инструкции, содержащиеся в самой вики. Кроме того, источник связан с исходным проектом для MultiMarkdown в `documentation`каталоге. Если вы загружаете источник, вы можете автоматически скомпилировать копию документации:

```
make docs

```

(Эта команда требует установки perl - возможно, в какой-то момент я буду работать над альтернативой для пользователей Windows без perl).

## Как установить MultiMarkdown?

В приведенных ниже инструкциях «Basic» вы получите функциональную установку MultiMarkdown, включая следующие команды:

- `multimarkdown`
- `mmd`
- `mmd2tex`
- `mmd2opml`
- `mmd2odf`

Инструкции «Advanced» помогут, если вы хотите использовать некоторые из более продвинутых функций, таких как пользовательский выход XSLT, вам нужно будет установить файлы поддержки MultiMarkdown.

Если вы хотите использовать функции LaTeX, было бы полезно установить файлы поддержки LaTeX.

Инструкции приводятся для нескольких операционных систем:

- [Mac OS X](http://fletcher.github.io/peg-multimarkdown/#macosx)
- [Windows](http://fletcher.github.io/peg-multimarkdown/#windows)
- [Linux](http://fletcher.github.io/peg-multimarkdown/#linux)

### Mac OS X

#### основной

На Mac вы можете выбрать установку установщика для установки программы и требуемых библиотек для вас, или вы можете скомпилировать ее с нуля. Если вы знаете, что это значит, следуйте инструкциям ниже в разделе Linux. В противном случае обязательно пойдите для установщика!

1. Загрузите последнюю версию `MultiMarkdown-Mac`установщика состраницы [загрузки](http://github.com/fletcher/peg-multimarkdown/downloads)
2. Разархивируйте загруженный файл, затем запустите программу установки и следуйте инструкциям на экране.

#### продвинутый

Если вы хотите использовать [XSLT](http://en.wikipedia.org/wiki/XSLT) для настройки вашего вывода или хотите использовать MultiMarkdown с [Scrivener](http://www.literatureandlatte.com/scrivener.html) или [TextMate](http://macromates.com/) , вы также должны загрузить и запустить программу `MultiMarkdown-Support-Mac` [установки](http://github.com/fletcher/peg-multimarkdown/downloads) .

Если вы хотите использовать LaTeX для создания PDF-файлов, я рекомендую загрузить [файлы поддержки](https://github.com/fletcher/peg-multimarkdown-latex-support) LaTeX и разместить их`~/Library/texmf/tex/latex/mmd`.

#### составление

Инструкции по компиляции на Mac OS X аналогичны инструкциям [Linux](http://fletcher.github.io/peg-multimarkdown/#linux) ниже. Если вы хотите создать установщик, вы можете переключиться на `mac-installer`ветвь и использовать эту `make mac-installer`команду.

В Mac OS X обратите внимание, что вам нужно будет установить Инструменты разработчика. Затем вам нужно установить несколько библиотек. Я использовал [доморощенный](https://github.com/mxcl/homebrew) :

```
brew install pkg-config glib gettext

```

Вы также можете использовать [fink](http://www.finkproject.org/) или что-то подобное (хотя это вызвало некоторые несовместимости машинной архитектуры для меня):

```
fink install glib2-shlibs glib2-dev

```

### Windows

#### основной

Самый простой способ установить MMD в Windows - это `MultiMarkdown-Windows` установить с страницы [загрузки](http://github.com/fletcher/peg-multimarkdown/downloads) и запустить ее. Установщик построен с использованием программного обеспечения [BitRock](http://bitrock.com/) .

Как и в случае с версией Mac OS X, установщик включает `multimarkdown`двоичный файл, а также несколько удобных сценариев.

Вы можете использовать проводник Windows для создания ярлыков для `multimarkdown` двоичного файла и настроить свойства, чтобы вы могли создавать «перетаскивание» версий MMD.

#### продвинутый

Если вы собираетесь использовать LaTeX для создания PDF-файлов, вам нужно будет установить рабочую версию LaTeX. Я использовал [TeX Live](http://www.tug.org/texlive/)в прошлом, но детали установки, которые вам нужны. Я также рекомендую установить [файлы поддержки](https://github.com/fletcher/peg-multimarkdown-latex-support) LaTeX .

Если вы хотите использовать [XSLT](http://en.wikipedia.org/wiki/XSLT) для настройки вашего вывода, вам нужно будет установить рабочую версию `xsltproc`и программу, чтобы вы могли запускать сценарии оболочки, чтобы вы могли использовать скрипты утилиты [MMD-Support](https://github.com/fletcher/MMD-Support) . Это довольно сложно установить в Windows, поэтому я настоятельно рекомендую вам определить, действительно ли вам нужны эти функции. Большинство необходимых вам настроек можно сделать в файлах LaTeX include, указанных в метаданных, без необходимости XSLT. Ознакомьтесь с некоторыми примерами в [галерее MultiMarkdown](https://github.com/fletcher/MultiMarkdown-Gallery) и в файлах поддержки LaTeX, чтобы узнать, что можно сделать.

#### составление

Если вы хотите скомпилировать это самостоятельно, вы делаете это так же, как вы устанавливаете привязку привязки для Windows. Инструкции приведены на [wiki-](https://github.com/fletcher/peg-multimarkdown/wiki/User's-Manual) странице peg-multimarkdown (https://github.com/fletcher/peg-multimarkdown/wiki/Building-for-Windows). Я смог легко скомпилировать для Windows, используя Ubuntu linux, следуя этим инструкциям. Я не пытался скомпилировать на компьютере Windows.

В противном случае обратитесь к разделу [Linux](http://fletcher.github.io/peg-multimarkdown/#linux) для получения дополнительных советов.

(Для тех, кто заинтересован, я фактически создал экземпляр EC2 на Amazon и установил необходимое программное обеспечение для компиляции. Это было довольно легко и, вероятно, стоило мне $ 0,02 ...)

### Linux

#### Базовая компиляция

В настоящее время единственным способом установки MultiMarkdown на * nix-машинах является его компиляция. Вам нужно `glib2`установить. Например, на ubuntu:

```
sudo apt-get install libglib2.0-dev

```

Для других дистрибутивов Linux вам нужно будет сделать что-то подобное.

После того, как вы установили библиотеки, вы можете либо загрузить исходный код со страницы [загрузки](http://github.com/fletcher/peg-multimarkdown/downloads) , либо (предпочтительно) вы можете использовать git:

```
git clone --recursive git://github.com/fletcher/peg-multimarkdown.git

```

На этом этапе вы можете скомпилировать:

```
make

```

#### Расширенное компиляция

Еще один шаг для включения, если вы используете git для клонирования источника, заключается в том, чтобы запустить `update_submodules.sh`скрипт. Этот скрипт в основном выполняет две команды, которые вы также можете запустить вручную:

```
git submodule init
git submodule update

```

Затем просто запустите `make`для компиляции источника. Вы также можете запустить некоторые тестовые команды, чтобы убедиться, что все работает правильно. Следует отметить, что в тестах Markdown нормально проходить один тест, но остальные должны пройти. Затем вы можете установить бинарные и служебные скрипты везде, где захотите, хотя для согласованности `/usr/local/bin`, вероятно, было бы лучше.

```
make
make test
make mmdtest
make latextest

```

Как указано выше, если вы собираетесь использовать [XSLT](http://en.wikipedia.org/wiki/XSLT) , [LaTeX](http://en.wikipedia.org/wiki/LaTeX) , и тому подобное, я рекомендую также установки поддержки LaTeX [файлов](https://github.com/fletcher/peg-multimarkdown-latex-support)и [MultiMarkdown поддержки](https://github.com/fletcher/MMD-Support) .

## Как использовать MultiMarkdown?

В зависимости от ваших потребностей существует несколько способов использования MultiMarkdown. Вы можете использовать `multimarkdown`инструмент командной строки, вы можете использовать MultiMarkdown с несколькими приложениями, которые поддерживают его напрямую, или вы можете использовать подход перетаскивания.

### Использование командной строки

Во-первых, убедитесь, что вы правильно установили MultiMarkdown:

```
multimarkdown -v

```

Если вы не видите сообщение о том, какая версия MultiMarkdown установлена, проверьте Устранение неполадок.

Чтобы узнать больше о параметрах командной строки для multimarkdown:

```
multimarkdown -h

```

После правильной установки MultiMarkdown:

```
multimarkdown file.txt

```

Преобразует простой текстовый файл `file.txt`в вывод HTML. Чтобы сохранить результаты в файле:

```
multimarkdown file.txt > file.html

```

Ярлык для этого - использовать пакетный режим MultiMarkdown, который будет сохранять вывод в том же базовом имени файла, который вводится, с расширением `.html`(или `.tex`для выхода LaTeX):

```
multimarkdown -b file.txt

```

Преимущество пакетного режима заключается в том, что вы можете обрабатывать сразу несколько файлов:

```
multimarkdown -b file1.txt file2.txt file3.txt

```

Если вы хотите создать выход LaTeX вместо HTML:

```
multimarkdown -t latex file.txt

```

Для OPML:

```
multimarkdown -t opml file.txt

```

И для текстового файла OpenDocument:

```
multimarkdown -t odf file.txt

```

В MultiMarkdown есть несколько удобных сценариев:

```
mmd file.txt
mmd2tex file.txt
mmd2opml file.txt
mmd2odf file.txt

```

Эти скрипты запускают MultiMarkdown в пакетном режиме для создания файлов HTML, LaTeX, OPML или ODF соответственно. Эти сценарии включены в инсталляторы Mac или Windows и доступны для * nix в `scripts`каталоге в исходном проекте. Они предназначены для использования в качестве ярлыков для наиболее распространенных параметров командной строки.

#### Параметры командной строки

При запуске MultiMarkdown из командной строки существует несколько параметров.

```
multimarkdown -v, multimarkdown --version

```

Отображает версию установленного MultiMarkdown.

```
multimarkdown -o, multimarkdown --output=FILE

```

Направляет вывод в указанный файл. По умолчанию выход направлен `stdout`. Использование `batch`режима устраняет необходимость использования этой опции, но если вы хотите указать другое имя выходного файла, это может быть удобно.

```
multimarkdown -t html|latex|memoir|beamer|opml|odf

```

Эти параметры задавали формат, который выводит MultiMarkdown. По умолчанию используется html. Если вы используете `LaTeX Mode`метаданные, то MultiMarkdown автоматически выберет `memoir`или `beamer`как указано без использования этих параметров командной строки. Использование этих метаданных также позволит различным сценариям выбора выбирать правильный формат вывода.

```
multimarkdown -x, multimarkdown --extensions

```

Это включает все расширения. Он действительно предназначен для использования, когда вы хотели бы использовать некоторые из расширений привязки привязки. Вероятно, это не полезно для пользователей MultiMarkdown, но я оставил его включенным на всякий случай, за исключением случаев, когда он мешает желаемой функциональности MMD.

```
multimarkdown --filter-html
multimarkdown --filter-styles

```

Первая команда заставляет любой необработанный HTML (кроме стилей), включенный в исходный документ, *не* включаться в вывод. Вторая команда удаляет теги HTML-стиля из вывода.

```
multimarkdown -c, multimarkdown --compatibility

```

Режим совместимости заставляет MultiMarkdown выводить HTML, который совместим с этим выходом из исходного Markdown. Это позволяет передать оригинальный набор тестов Markdown. Функции синтаксиса, которые не существуют в регулярном Markdown, будут выводиться с использованием стандартного форматирования вывода MultiMarkdown.

```
multimarkdown -b, multimarkdown --batch

```

Автоматически перенаправляет вывод в файл с тем же базовым именем, что и входной файл, но с соответствующим расширением на основе типа вывода. Например, `multimarkdown -b file.txt`выводит HTML `file.html`и`multimarkdown -b -t latex file.txt`выводит `file.tex`.

```
multimarkdown -e "metakey", multimarkdown --extract "metakey"

```

Функция extract выводит значение указанного ключа метаданных. Это используется в моих сценариях для удобства выбора правильного режима вывода LaTeX и может использоваться и в других обстоятельствах.

```
multimarkdown --smart

```

Использует умную типографику, похожую на программу Джона Грубера [SmartyPants] (http://daringfireball.net/projects/smartypants/), которая была включена в MultiMarkdown 2.0. Это расширение включено по умолчанию в MultiMarkdown.

```
multimarkdown --notes

```

Позволяет использовать сноски и аналогичную разметку (глоссарий, цитаты). Включено по умолчанию в MultiMarkdown.

```
multimarkdown --process-html

```

Этот параметр указывает MultiMarkdown обрабатывать текст, включенный в теги HTML в исходном документе.

Другие варианты доступны, проверяя `multimarkdown --help-all`, но перечисленные выше являются основными параметрами.

#### Расширенный режим

MultiMarkdown версии 2.0 должен был сначала преобразовать исходный файл в HTML, а затем применить XSLT-файлы для преобразования в окончательный формат LaTeX. Поскольку MultiMarkdown 3.0 может создавать LaTeX напрямую, этот подход больше не нужен.

Однако одно из преимуществ этого подхода состояло в том, что стало возможным выполнять широкий спектр настроек для того, как именно был создан выход LaTeX, настроив файлы XSLT.

Если вы установите файлы поддержки на Mac или Linux, вы можете использовать расширенный метод XSLT для генерации вывода LaTeX. В настоящее время этот подход не работает с Windows, но было бы довольно легко создать пакетный скрипт или perl-скрипт для реализации этой функции в Windows.

Имейте в виду, однако, что из-за более продвинутого механизма обработки LaTeX в MultiMarkdown 3.0 вы можете выполнить большую настройку без использования XSLT-файла.

`mmd2tex-xslt`Скрипт преобразует обычный текстовый файл в LaTeX , который практически идентичен созданный регулярным LaTeX подход.

Однако есть несколько различий в двух подходах:

- Когда файл MultiMarkdown преобразуется в HTML, невозможно определить, был ли результирующий HTML сгенерирован MultiMarkdown или если он был включен как исходный HTML в исходный документ. Таким образом, в *любом* случае, он будет преобразован в аналоговом синтаксисе LaTeX. Сам `multimarkdown`двоичный файл *не* преобразует HTML в LaTeX.
- Пробелы, которые генерируются, будут отличаться при определенных обстоятельствах. Как правило, это приведет к появлению одного лишнего или одного меньшего количества пустых строк с помощью подхода XSLT. Как правило, это не проблема, но при использовании с `<!-- some comment -->`ней может быть потеряна новая строка.
- XSLT по умолчанию распознает, `class="noxslt"`когда применяется к объектам HTML, и отбрасывает их из вывода.
- XSLT можно применять только к полному HTML-документу, а не к «фрагменту». Поэтому, если вы хотите использовать метод XSLT, ваш файл должен иметь метаданные, которые запускают полный документ (т.е. любые метаданные, кроме «языка кавычек» или «базового уровня заголовка»).
- Использование XSL для обработки HTML-файла будет «де-обфускать» любые адреса электронной почты, которые были запутаны MultiMarkdown.

#### рекомендации

Я рекомендую вам ознакомиться с «базовым» подходом к использованию MultiMarkdown, прежде чем пытаться экспериментировать с XSLT. Базовый подход быстрее и проще, и результаты все еще могут быть настроены совсем немного.

Затем вы можете поэкспериментировать с изменением XSLT для дальнейшей настройки вашего вывода по мере необходимости.

Если у вас есть файлы XSLT, которые вы использовали в MultiMarkdown 2.0, вам, скорее всего, придется их модифицировать, чтобы распознать вывод HTML, созданный MultiMarkdown 3.0. Вы можете использовать файлы XSLT по умолчанию в качестве руководства к тому, что отличается.

### Приложения Mac OS X

Существует несколько приложений, которые имеют встроенную поддержку MultiMarkdown или могут легко использовать ее с подключаемым модулем.

#### Использование MultiMarkdown с TextMate

Если вы хотите запустить MultiMarkdown непосредственно из [TextMate](http://macromates.com/) , вы должны установить [пакет](https://github.com/fletcher/markdown.tmbundle) MultiMarkdown . Это модифицированная версия исходного пакета Markdown для TextMate, который включает лучшую поддержку MultiMarkdown.

Этот пакет будет работать с MultiMarkdown 2.0 или с MultiMarkdown 3.0, если вы установите файлы поддержки MultiMarkdown (доступные со [страницы](http://github.com/fletcher/peg-multimarkdown/downloads) загрузки ).

#### Использование MultiMarkdown с Scrivener

[Scrivener](http://www.literatureandlatte.com/scrivener.html) - отличная программа для авторов, использующих Mac OS X. Она включает встроенную поддержку MultiMarkdown. Если вы хотите использовать MultiMarkdown 3.0 с Scrivener, вам необходимо установить файлы поддержки `~/Library/Application Support/MultiMarkdown`. Установщик MultiMarkdown-Support доступен со [страницы](http://github.com/fletcher/peg-multimarkdown/downloads) загрузки и будет устанавливать эти файлы для вас.

#### Перетаскивание

Вы можете использовать приложения перетаскивания Mac OS X, чтобы вы могли конвертировать MultiMarkdown в другие форматы, перетаскивая файлы в Finder. Они доступны на странице [загрузки](http://github.com/fletcher/peg-multimarkdown/downloads) или запускаются `make drop`из командной строки в `multimarkdown`исходном каталоге.

#### MultiMarkdown и Finder "Быстрый просмотр"

Начиная с Mac OS 10.5, Finder имеет возможность показывать предварительный просмотр содержимого файла. У меня есть генератор Quick Look, который позволяет Finder просматривать содержимое текстового файла MultiMarkdown (или файла OPML) в виде предварительного просмотра HTML.

Доступно для загрузки из [github] (https://github.com/fletcher/MMD-QuickLook/downloads).

### Использование MultiMarkdown в Windows

Вы можете использовать один и тот же подход к командной строке с Windows, как описано выше. Хотя для системы Windows не используются приложения перетаскивания, вы можете использовать проводник Windows для создания ссылок на двоичные файлы и указать и желаемые параметры командной строки для изменения формата вывода по умолчанию. Это позволит вам создать приложения для перетаскивания для Windows.

### MultiMarkdown и LaTeX

Примечание. [LaTeX](http://en.wikipedia.org/wiki/LaTeX) представляет собой сложный набор программ. MultiMarkdown не включает LaTeX в установщик - пользователю нужно установить рабочую настройку LaTeX на своем компьютере, если вы хотите ее использовать.

Что делает MultiMarkdown, так это упростить создание документов с использованием синтаксиса LaTeX. Он должен обрабатывать 80% документов, которые нужны 80% MultiMarkdown. Он не справляется со всеми обстоятельствами, и иногда вам нужно будет самостоятельно передать код LaTeX.

В этих случаях у вас есть несколько вариантов. MultiMarkdown передаст текст, включенный в комментарии HTML, к LaTeX как исходный вывод. Например:

```
<!--  This is raw \LaTeX \[ {e}^{i\pi }+1=0 \] -->

```

Вы также можете указать желаемый код LaTeX в отдельный файл и ссылку на него:

```
<!-- \input{somefile} -->

```

Если у вас есть вопросы о LaTeX, я не могу помочь. Вы можете отправить свой вопрос в [Дискуссионный список MultiMarkdown](http://groups.google.com/group/multimarkdown/) , и, возможно, кто-то сможет оказать некоторую помощь. Но вам лучше попросить группу, посвященную LaTeX.

Если проблема заключается в том, что MultiMarkdown сам генерирует недопустимый LaTeX, то, конечно, я хочу знать об этом, чтобы я мог его исправить.

Если вам нужна дополнительная информация о том , как использовать LaTeX для обработки файла в формате PDF, проверьте [FAQ](http://fletcher.github.io/peg-multimarkdown/#process-latex) .

### MultiMarkdown и OPML

MultiMarkdown хорошо подходит для текстовых файлов, но также может быть полезен для работы с документами MultiMarkdown в приложении для моделирования или отображения соответствия. Для этого легко конвертировать назад и вперед между OPML и открытым текстом MultiMarkdown.

Для преобразования из текстового файла в OPML:

```
multimarkdown -t opml -b file.txt

```

или:

```
mmd2opml file.txt

```

В результате файл OPML использует заголовки для построения структуры структуры и помещает текст в каждый раздел как не для соответствующего уровня контура с использованием `_note`атрибута. **ПРИМЕЧАНИЕ** . Не все сторонники поддерживают этот атрибут. В Mac OS X [OmniOutliner](http://www.omnigroup.com/applications/omnioutliner/)(http://www.omnigroup.com/applications/omnioutliner/) - потрясающий план, который поддерживает это поле. Если вы используете программное обеспечение для составления карт, [iThoughts] (http://www.ithoughts.co.uk/) работает на iPad / iPhone и поддерживает импорт и экспорт с OPML и `_note`атрибутом.

Для преобразования из OPML вы можете использовать различные команды из пакета [MMD-Support](https://github.com/fletcher/MMD-Support) (https://github.com/fletcher/MMD-Support):

```
opml2HTML file.opml
opml2mmd file.opml
opml2LaTeX file.opml

```

**ПРИМЕЧАНИЕ** . Эти сценарии требуют рабочей установки `xsltproc`и возможности запуска сценариев оболочки. Это должно работать по умолчанию на большинстве установок Mac OS X или Linux, но потребует, чтобы эти приложения устанавливались отдельно в Windows.

### MultiMarkdown и OpenDocument

Также можно преобразовать текстовый файл MultiMarkdown в документ обработки текста для [OpenOffice.org](http://www.openoffice.org/) или [LibreOffice](http://www.libreoffice.org/download) . Этот файл затем может быть преобразован одним из этих приложений в RTF или документ Microsoft Word или многие другие форматы файлов. (Если вы не знакомы с этими приложениями, их стоит проверить. Я не понимаю, почему люди больше используют Microsoft Office ...)

```
multimarkdown -b -t odf file.txt

```

или

```
mmd2odf file.txt

```

MultiMarkdown 2.0 имел частичную поддержку для вывода RTF-файла и мог полностью использовать его в Mac OS X с помощью `textutil`программы Apple . MMD 3 больше не поддерживает RTF в качестве выходного формата, но формат Flat OpenDocument является гораздо лучшим вариантом.

**ПРИМЕЧАНИЕ** . LibreOffice может открывать эти файлы Flat OpenDocument по умолчанию, но OpenOffice требует, чтобы вы установили `OpenDocument-Text-Flat-XML.jar`файл, доступный состраницы [загрузки](https://github.com/fletcher/peg-multimarkdown/downloads) . Чтобы установить его, создайте новый документ в OpenOffice (или откройте существующий), затем перейдите в пункт меню Tools-> XML Filter Settings. Используйте кнопку «Открыть пакет ...», чтобы импортировать загруженный `.jar`файл.

#### Расширенное использование

Для настройки вывода OpenDocument из MultiMarkdown можно использовать файл XSLT. Я полагаю, вы могли бы также написать XSLT, чтобы преобразовать OpenDocument в LaTeX, подобно тем, которые по умолчанию конвертируют HTML в LaTeX.

Вы также можете создать XSLT, который преобразует выход OpenDocument и модифицирует его для включения необходимых настроек. Хотя немного сложно узнать, XSLT-файлы могут быть довольно мощными, и вы ограничены только своим воображением.

#### Ограничения

Для формата OpenDocument Flat Text существует несколько ограничений:

- Изображения не поддерживаются полностью - они работают лучше всего, если вы указываете длину и ширину в «фиксированных» единицах (не «%») или не указываете какие-либо измерения.
- Цитаты не поддерживаются - я хотел бы сделать что-то здесь, но я подозреваю, что вам нужно будет использовать внешний инструмент в настоящее время
- Математические функции не поддерживаются, хотя я надеюсь, что смогу реализовать это в какой-то момент в будущем

## Как создать документ MultiMarkdown?

Общая концепция MultiMarkdown заключается в том, что для кого-то должно быть легко набирать простой текстовый файл, который можно читать человеком, а затем использовать программу MultiMarkdown для преобразования этого текстового файла на более сложный компьютерный язык, такой как HTML или LaTeX. Это позволяет создавать высококачественную продукцию без необходимости часами и часами работать с размерами шрифтов, полями и т. Д.

Первым шагом в обучении использованию MultiMarkdown является научиться использовать [Markdown](http://daringfireball.net/projects/markdown/) . MultiMarkdown является расширением Markdown и основывается на основных принципах, используемых в Markdown.

Я рекомендую начать с ознакомления с Markdown [основами](http://daringfireball.net/projects/markdown/basics) и[синтаксиса](http://daringfireball.net/projects/markdown/syntax) страниц.

Когда вы знакомы с основами Markdown, будет довольно легко подобрать расширенные функции, включенные в MultiMarkdown.

### Метаданные

Можно включить специальные метаданные в верхней части документа MultiMarkdown, такие как название, автор и т. Д. Затем эту информацию можно использовать для управления процессом обработки документов MultiMarkdown или их можно использовать в определенных форматах вывода специальными способами.

```
Title:   A Sample MultiMarkdown Document  
Author:  Fletcher T. Penney  
Date:    February 9, 2011  
Comment: This is a comment intended to demonstrate  
         metadata that spans multiple lines, yet  
         is treated as a single value.  
Test:    And this is a new key-value pair  

```

Синтаксис для включения метаданных прост.

- Метаданные должны начинаться с самого верха документа - перед ним не могут быть пустые строки.
- Метаданные состоят из двух частей - `key`и`value`
- Ключ метаданных должен начинаться в начале строки. Он должен начинаться с буквы или цифры, тогда следующие символы могут состоять из букв, цифр, пробелов, дефисов или символов подчеркивания.
- Конец ключа метаданных указан двоеточием (':')
- После двоеточия появляется значение метаданных, которое может состоять из почти любых символов (включая новые строки). Чтобы не смешивать многозначные метаданные с дополнительными метаданными, я рекомендую отложить каждую новую строку метаданных. Если ваше значение метаданных включает двоеточие, оно *должно* быть отступом, чтобы оно не считалось новой парой ключ-значение.
- Хотя это и не требуется, я рекомендую использовать два пробела в конце каждой строки метаданных. Это улучшит внешний вид раздела метаданных, если ваш документ обрабатывается Markdown вместо MultiMarkdown.
- Клавиши метаданных нечувствительны к регистру и лишены всех пробелов во время обработки. Это означает, что `Base Header Level`, `base headerlevel`и `baseheaderlevel`все одинаковы.
- Метаданные обрабатываются как обычный текст, поэтому он *не*должен включать разметку MultiMarkdown. Можно создать настраиваемые XSLT-файлы, которые применяют определенную обработку к значению метаданных, но это не поведение по умолчанию.
- После завершения метаданных пустая строка запускает начало остальной части документа.

### Полные документы против «фрагментов»

Чтобы включить метаданные, такие как заголовок, HTML-документ, созданный MultiMarkdown, должен быть «полным». Это означает, что он начинается с чего-то, что выглядит следующим образом:

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

```

Если вы включаете метаданные в свой документ (за двумя исключениями), вы создадите полный документ. Если вы не включаете метаданные, вместо этого вы создадите «фрагмент». В фрагменте будет отображаться только соответствующая часть HTML, но не будет включать в себя элементы `<head>`или `<body>`элементы.

Метаданные, которые предназначены только для того, чтобы повлиять на то, как процессы MultiMarkdown обрабатывают, не вызовут полный документ. В настоящее время это означает, что вы можете использовать`Base Header Level`или или `Quotes Language`все еще выводить фрагмент, если вы не включаете другие метаданные.

В форматах документов, отличных от HTML, нет различий между полными документами и фрагментами. Любые включенные и соответствующие метаданные будут включены, если они присутствуют.

### «Стандартные» ключи метаданных

Есть несколько ключей метаданных, которые стандартизованы в MultiMarkdown. Вы можете использовать любые другие ключи, которые вы желаете, но вы должны сами использовать их.

Моя цель - сохранить список «стандартных» ключей метаданных как можно короче.

#### автор

Это значение представляет автора документа и используется в документах LaTeX для генерации информации о названии.

#### присоединение

Это используется для ввода дополнительной информации об авторе - ссылки на веб-сайт, работодателя, академической принадлежности и т. Д.

#### Уровень базового заголовка

Это используется для изменения верхнего уровня организации документа. Например:

```
Base Header Level: 2

# Introduction #

```

Обычно введение будет выводиться как `<h1>`в HTML, так и `\part{}`в LaTeX. Если вы пишете более короткий документ, вы можете пожелать, чтобы наибольшее подразделение в документе было `<h2>`или `\chapter{}`. `Base Header Level` Метаданные говорит MultiMarkdown изменить наибольший уровень деления на заданное значение.

Это также может быть полезно при объединении нескольких документов.

`Base Header Level` Не запускает полный документ.

Кроме того, есть «вкус» этот ключ метаданных для различных форматов вывода , так что вы можете указать другой уровень заголовка для различных выходных форматов - то есть `LaTeX Header Level`, `HTML Header Level`, и `ODF Header Level`.

#### Стиль библии

Эти метаданные определяют имя используемого стиля BibTeX, если вы не используете natbib.

#### BibTeX

Эти метаданные определяют имя файла BibTeX, используемого для хранения информации о цитировании. Не включайте конечный «.bib».

#### Авторские права

Это можно использовать для предоставления строки авторского права.

#### CSS

Эти метаданные указывают URL-адрес, который будет использоваться в качестве файла CSS для созданного документа. Очевидно, что это полезно только при выводе на HTML.

#### Дата

Укажите дату, связанную с документом.

#### Заголовок HTML

Вы можете включить необработанную HTML-информацию, которая будет включена в заголовок. MultiMarkdown не выполняет никаких валидаций по этим данным - он просто копирует его как есть.

Например, это может быть полезно для привязки вашего документа к рабочей установке MathJax (не предоставленной мной):

```
HTML header:  <script type="text/javascript"
    src="http://example.net/mathjax/MathJax.js">
    </script>

```

#### Язык цитат

Это используется, чтобы указать, какой стиль «умных» котировок используется в выходном документе. Доступны следующие варианты:

- Голландский
- английский
- Французский
- Немецкий
- germanguillemets
- шведский

Значение по умолчанию - `english`если не указано. Это влияет на вывод HTML. Для изменения языка документа в LaTeX зависит от человека.

`Quotes Language` Не запускает полный документ.

#### LaTeX Footer

Частный случай `LaTeX Input`метаданных ниже. Этот файл будет связан с самой частью документа.

#### Вход LaTeX

При выдаче документа LaTeX необходимо указать различные направления, определяющие способ форматирования документа. Они не включены в сам документ MultiMarkdown - вместо этого они должны храниться отдельно и связаны с `\input{file}`командами.

Эти ссылки могут быть включены в раздел метаданных. Метаданные обрабатываются по порядку, поэтому я обычно разбиваю свои директивы на группу, которая должна идти до моих метаданных, группы, которая идет после метаданных, но до самого документа и отдельной группы, которая идет в конце документа, например:

```
latex input:        mmd-memoir-header
Title:              MultiMarkdown Example
Base Header Level:  2
latex mode:         memoir
latex input:        mmd-memoir-begin-doc
latex footer:       mmd-memoir-footer

```

Вы можете загрузить файлы [поддержки LaTeX,](https://github.com/fletcher/peg-multimarkdown-latex-support) если вы хотите выводить документы, используя стили MultiMarkdown по умолчанию. Затем вы можете использовать их в качестве примеров для создания собственного настраиваемого вывода LaTeX.

Эта функция должна позволять вам делать практически все, что вы можете сделать, используя функции XSLT из MultiMarkdown 2.0. Что еще более важно, это означает, что продвинутые пользователи LaTeX не должны изучать XSLT для настройки своего кода по желанию.

#### Режим LaTeX

При выдаче документа в LaTeX есть два специальных параметра, которые немного изменяют вывод - `memoir`и `beamer`. Эти параметры предназначены для совместимости с классами LaTeX с одинаковыми именами.

#### Заголовок ODF

Вы можете включить raw XML для включения в заголовок файла вывода в формате OpenDocument. Вам нужно правильно форматировать свой XML и заставить его работать - MultiMarkdown просто копирует его дословно.

#### заглавие

Интуитивно понятный.

### Перекрестные ссылки

Часто заданной функцией была способность Markdown автоматически обрабатывать ссылки внутри документа так же легко, как и внешние ссылки. С этой целью я добавил способность интерпретироваться `[Some Text][]`как перекрестную ссылку, если существует заголовок с именем «Some Text».

В качестве примера, `[Metadata][]` приведу вас в [раздел, описывающий метаданные](http://fletcher.github.io/peg-multimarkdown/#metadata) .

Кроме того, вы можете включить необязательный ярлык по своему выбору, чтобы помочь устранить случаи, когда несколько заголовков имеют одинаковый заголовок:

```
### Overview [MultiMarkdownOverview] ##

```

Это позволяет использовать `[MultiMarkdownOverview]`для ссылки на этот раздел, а не на другой раздел `Overview`. Это работает с заголовками atx или settext.

Если вы уже определили якорь с использованием того же идентификатора, который используется заголовком, то определенный якорь имеет приоритет.

Помимо заголовков в документе, вы можете предоставить метки для изображений и таблиц, которые затем могут использоваться для перекрестных ссылок.

### Атрибуты изображения и ссылки

Добавление атрибутов к ссылкам и изображениям было запрошено в течение длительного времени в списке обсуждения Markdown. Я был против этого, так как большинство предложений действительно нарушало читаемость синтаксиса. Я считаю себя «пуристом Markdown», что означает, что я воспринял введение Джона в сердце:

> Главной целью дизайна для синтаксиса форматирования Markdown является сделать его максимально читаемым. Идея заключается в том, что документ в формате Markdown должен быть доступен для публикации как есть, как обычный текст, не выглядя, как будто он был помечен тегами или инструкциями по форматированию. В то время как синтаксис Markdown повлиял на несколько существующих фильтров text-to-HTML, единственным источником вдохновения для синтаксиса Markdown является формат электронной почты простого текста.

Поскольку не было синтаксического предложения, которое я считал подходящим для этой цели, я вообще был против этой идеи.

Затем Чоан К. Гальвес [предложил](http://six.pairlist.net/pipermail/markdown-discuss/2005-October/001578.html) блестяще простой синтаксис, который оставался в стороне. Просто добавляя атрибуты к ссылочной информации ссылки, которая уже удалена из самого текста, это не мешает читаемости.

Например:

```
This is a formatted ![image][] and a [link][] with attributes.

[image]: http://path.to/image "Image title" width=40px height=400px
[link]:  http://path.to/link.html "Some Link" class=external
         style="border: solid black 1px;"

```

Это создаст атрибуты ширины и высоты для изображения и границу вокруг ссылки. И хотя можно утверждать, что он выглядит «как будто он был отмечен тегами [и] инструкциями по форматированию», даже я не могу слишком возражать против него. Ссылка и заголовок в кавычках уже выглядят как разная разметка, а дополнительные теги вряд ли навязчивы, и они обладают большой функциональностью. Они могут даже быть полезными в дальнейших функциях (цитаты?).

Атрибуты должны продолжаться после других данных ссылки / изображения и могут содержать новые строки, но должны начинаться в начале строки. Формат - `attribute=value`или `attribute="multi word value"`. В настоящее время MultiMarkdown не пытается интерпретировать или использовать какой-либо из этих атрибутов. Кроме того, вы не можете использовать атрибут multiword для новой строки.

### таблицы

Я применил синтаксис для таблиц, аналогичных тому, который использовался [PHP Markdown Extra](http://www.michelf.com/projects/php-markdown/extra/) Майкла Фортина .

В принципе, он позволяет вам поворачивать:

```
|             |          Grouping           ||
First Header  | Second Header | Third Header |
 ------------ | :-----------: | -----------: |
Content       |          *Long Cell*        ||
Content       |   **Cell**    |         Cell |

New section   |     More      |         Data |
And more      |            And more         ||
[Prototype table]

```

В [таблицу](http://fletcher.github.io/peg-multimarkdown/#prototypetable) .

|                  | группирование    |                  |
| ---------------- | ---------------- | ---------------- |
| Первый заголовок | Второй заголовок | Третий заголовок |
| содержание       | *Длинные ячейки* |                  |
| содержание       | **клетка**       | клетка           |
| Новый раздел     | Больше           | Данные           |
| И более          | И более          |                  |

Требования:

- Должно быть не менее одного `|`на строку
- Линия «разделитель» должен содержать только `|`, `-`, `:`, `.`, или пробелы
- Содержимое ячейки должно быть только на одной линии
- Столбцы разделены `|`
- Первая строка таблицы и линия выравнивания / делителя должны начинаться в начале строки

Другие примечания:

- Это необязательно, если у вас есть `|`в начале и в конце строк.
- Чтобы установить выравнивание, вы можете использовать двоеточие, чтобы обозначать выравнивание влево или вправо, или двоеточие на каждом конце, чтобы обозначить выравнивание по центру, как указано выше. Если двоеточие не присутствует, выбирается выравнивание по умолчанию вашей системы (в большинстве случаев оно остается слева).
- Чтобы указать, что ячейка должна охватывать несколько столбцов, просто добавьте дополнительные `|`концы ( ) в конце ячейки, как показано в примере. Если ячейка, о которой идет речь, находится в конце строки, то, конечно, это означает, что в конце этой строки трубы не являются необязательными.
- Вы можете использовать обычную разметку Markdown в ячейках таблицы.
- Подписи не являются обязательными, но если они должны быть в начале строки, непосредственно предшествующей или следующей за таблицей, начните с `[`нее и закончите с `]`. Если у вас есть подпись до и после таблицы, будет использоваться только первое совпадение.
- Если у вас есть подпись, вы также можете иметь ярлык, позволяющий создавать привязки, указывающие на таблицу. Если метки нет, подпись будет действовать как метка
- Клетки могут быть пустыми.
- Вы можете создавать несколько `<tbody>`тегов внутри таблицы, имея **одну** пустую строку между строками таблицы. Это позволяет вашему CSS размещать горизонтальные границы для выделения разных разделов таблицы.

### Сноски

Я добавил поддержку сносок к MultiMarkdown, используя синтаксис, предложенный Джоном Грубером. Обратите внимание, что официальной поддержки сносок пока нет, поэтому формат вывода может измениться, но формат ввода звучит довольно стабильно.

Чтобы создать сноску, введите примерно следующее:

```
Here is some text containing a footnote.[^somesamplefootnote]

[^somesamplefootnote]: Here is the text of the footnote itself.

[somelink]:http://somelink.com

```

Сама сноска должна быть в начале строки, так же как ссылки по ссылке. Если вы хотите, чтобы в сноске было несколько абзацев, списков и т. Д., Последующие абзацы нуждаются в дополнительной вкладке, предшествующей им. Возможно, вам придется поэкспериментировать, чтобы понять это правильно, и, пожалуйста, дайте мне знать о любых проблемах, которые вы найдете.

Вот как выглядит конечный результат:

> Вот какой текст содержит сноску. [[1\]](http://fletcher.github.io/peg-multimarkdown/#fn:1)

### Цитирование

Я включил поддержку *базовых* библиографических функций в этой версии MultiMarkdown. Пожалуйста, дайте мне отзывы о путях улучшения этого, но помните следующее:

1. Библиографическая поддержка в MultiMarkdown является рудиментарной. Цель состоит в том, чтобы предложить базовую автономную функцию, которая может быть изменена с использованием инструмента по вашему выбору в более надежном формате (например, BibTeX, CiteProc). Мои файлы XSLT демонстрируют, как сделать этот формат совместимым с BibTeX, но я не планирую лично обеспечивать совместимость с другими инструментами. Не стесняйтесь публиковать свои идеи и инструменты для вики.
2. Те, кто нуждается в более подробных наборах функций для своих библиографий, могут нуждаться в настраиваемых инструментах для предоставления этих услуг. Это основной инструмент, который должен работать для большинства людей. Однако справочные библиотекари, возможно, не будут удовлетворены.

Чтобы использовать ссылки в MultiMarkdown, вы используете синтаксис, похожий на синтаксис:

```
This is a statement that should be attributed to
its source[p. 23][#Doe:2006].

And following is the description of the reference to be
used in the bibliography.

[#Doe:2006]: John Doe. *Some Big Fancy Book*.  Vanity Press, 2006.

```

Созданный HTML выглядит следующим образом:

```
<p>This is a statement that should be attributed to its source
<span class="markdowncitation"> (<a href="#Doe:2006">1</a>, <span 
class="locator">p. 23</span>)</span>.</p>

<p>And following is the description of the reference to be used
in the bibliography.</p>

<div class="bibliography">
<hr />
<p>Bibliography</p>

<div id="Doe:2006"><p>[1] John Doe. <em>Some Big Fancy Book</em>.
Vanity Press, 2006.</p></div>

</div>

```

Вы не обязаны использовать локатор (например, 23), и нет специальных правил, которые могут использоваться в качестве локатора, если вы решите его использовать. Если вы предпочитаете опускать локатор, просто используйте пустой набор квадратных скобок перед цитированием:

```
This is a statement that should be attributed to its 
source[][#Doe:2006].

```

Нет правил в формате ключа цитирования, который вы используете (например `Doe:2006`), но ему должно предшествовать а `#`, как и использование сносок `^`.

Что касается ссылочного описания, вы можете использовать код разметки в этом разделе, и я рекомендую оставить пустую строку после этого, чтобы предотвратить конкатенацию нескольких ссылок. Обратите внимание, что нет способа переформатировать эти ссылки в разных стилях библиографии; Для этого вам нужна программа, предназначенная для этой цели (например, BibTeX).

Если вы хотите включить источник в свою библиографию, которая не была указана, вы можете использовать следующее:

```
[Not cited][#citekey]

```

`Not cited`Бит не чувствительны к регистру.

Если вы создаете документ LaTeX, ссылки будут включены, а natbib будет использоваться по умолчанию. Если вы не используете BibTeX и получаете ошибки о том, что ваши цитаты не совместимы с «Author-Year», вы можете добавить следующие метаданные документов:

```
latex input:        mmd-natbib-plain

```

Это изменяет стиль цитаты в natbib, чтобы избежать этих ошибок, и полезно, когда вы включаете свои цитаты в сам документ MultiMarkdown.

### BibTeX

Если вы создаете документ LaTeX и нуждаетесь в библиографии, вам обязательно нужно изучить [BibTeX](http://www.bibtex.org/) и [natbib](http://merkel.zoneo.net/Latex/natbib.php) . В рамках этого документа вы можете описать, как работают эти два пакета, но их можно комбинировать с MultiMarkdown.

Чтобы использовать BibTeX в документе MultiMarkdown, вам нужно использовать [`BibTeX` метаданные,](http://fletcher.github.io/peg-multimarkdown/#bibtex) чтобы указать, где хранятся ваши цитаты.

Поскольку `natbib`по умолчанию включена, у вас есть выбор между использованием `\citep`и `\citet`команд. Ниже показано, как это относится к используемому синтаксису MultiMarkdown.

```
[#citekey]    => ~\citep{citekey}
[#citekey][]  => ~\citep{citekey}

[foo][#citekey] => ~\citep[foo]{citekey}

[foo\]\[bar][#citekey] => ~\citep[foo][bar]{citekey}


[#citekey;]    => \citet{citekey}
[#citekey;][]  => \citet{citekey}

[foo][#citekey;] => \citet[foo]{citekey}

[foo\]\[bar][#citekey;] => \citet[foo][bar]{citekey}

```

### Списки определений

MultiMarkdown поддерживает списки определений, используя тот же синтаксис, который используется в [PHP Markdown Extra](http://www.michelf.com/projects/php-markdown/extra/) . В частности:

```
Apple
:   Pomaceous fruit of plants of the genus Malus in 
    the family Rosaceae.
:   An american computer company.

Orange
:   The fruit of an evergreen tree of the genus Citrus.

```

будет выглядеть так:

> - яблоко
>
>   Плодовые плоды растений рода Malus в семействе Rosaceae.
>
>   Американская компьютерная компания.
>
> - оранжевый
>
>   Плод вечнозеленого дерева рода Citrus.

Вы можете иметь более одного термина для каждого определения, помещая каждый термин в отдельную строку. Каждое определение начинается с двоеточия, и вы можете иметь более одного определения для каждого слова. Возможно, у вас может быть пустая строка между последним термином и первым определением.

Определения могут содержать другие элементы уровня блока, такие как списки, блокировки или другие списки определений.

В отличие от PHP Markdown Extra, все определения завернуты в `<p>`теги. Во-первых, я не смог заставить Markdown *не* создавать абзацы. Во-вторых, я не видел, где это имеет значение - единственное отличие кажется эстетичным, и я действительно предпочитаю `<p>`теги на месте. Дайте мне знать, если это проблема.

Дополнительную информацию см. На странице [PHP Markdown Extra](http://www.michelf.com/projects/php-markdown/extra/) .

### математический

MultiMarkdown 2.0 использовал [ASCIIMathML](http://www1.chapman.edu/~jipsen/mathml/asciimath.html) для набора математических уравнений. Были преимущества использования ASCIIMathML, а также некоторые недостатки.

При перезаписи для MultiMarkdown 3.0 не было простого способа реализовать ASCIIMathML, что заставило меня искать альтернативы. Я решил использовать [MathJax](http://www.mathjax.org/) . Преимущество в том, что тот же синтаксис поддерживается MathJax в браузерах и в LaTeX.

Это означает, что математика должна быть введена в документы MultiMarkdown с использованием синтаксиса LaTeX, а не ASCIIMathML.

Чтобы включить поддержку MathJax на веб-страницах, вы должны включить ссылку на активную установку MathJax. Установка этого параметра выходит за рамки этого документа, но это не так сложно.

Ниже приведен пример установки метаданных, а некоторые математические:

```
latex input:    mmd-article-header  
Title:          MultiMarkdown Math Example  
latex input:    mmd-article-begin-doc  
latex footer:   mmd-memoir-footer  
HTML header:    <script type="text/javascript"
    src="http://example.net/mathjax/MathJax.js">
    </script>


An example of math within a paragraph --- \\({e}^{i\pi }+1=0\\)
--- easy enough.

And an equation on it's own:

\\[ {x}_{1,2}=\frac{-b\pm \sqrt{{b}^{2}-4ac}}{2a} \\]

That's it.

```

Вот как это выглядит в действии (если вы просматриваете этот документ в поддерживаемом формате):

> Пример математики в параграфе - eI π+ 1 = 0еяπ+1знак равно0 - достаточно легко.
>
> И уравнение по своему усмотрению:
>
> 
>
> Икс1 , 2= - b ± b2- 4 a c-------√2 aИкс1,2знак равно-б±б2-4aс2a
>
> 
>
> Вот и все.

### глоссарий

MultiMarkdown имеет функцию, которая позволяет указывать сноски в качестве терминов глоссария. Это мало что делает для документов XHTML, но файл XSLT, который преобразует документ в LaTeX, предназначен для преобразования этих специальных сносок в записи глоссария.

Формат глоссария для сносок:

```
[^glossaryfootnote]: glossary: term (optional sort key)
    The actual definition belongs on a new line, and can continue on
    just as other footnotes.

```

Это `term`элемент, который принадлежит глоссарию. `sort key`Не является обязательным, и используется для указания того, что этот термин должен появиться где - то в словаре (который сортируется в алфавитном порядке).

К сожалению, для создания глоссария при создании pdf-файла из латексного файла требуется дополнительный шаг:

1. Вам необходимо установить `basic.gst`файл, который входит в класс memoir.
2. Для создания `.glo`файла необходимо запустить специальную команду makeindex : `makeindex -s `kpsewhich basic.gst` -o "filename.gls" "filename.glo"`
3. Затем вы снова запускаете обычную команду pdflatex несколько раз.

Кроме того, вы можете использовать приведенный ниже код для создания файла движка для TeXShop (он принадлежит `~/Library/TeXShop/Engines`). Вы можете назвать это чем-то вроде`MemoirGlossary.engine`. Затем, обрабатывая файл, который требует глоссарий, вы набираете документ один раз с этим движком, а затем продолжаете его обрабатывать обычным образом с помощью обычного механизма LaTeX. Ваш глоссарий должен быть составлен соответствующим образом. Если вы используете [TeXShop](http://www.uoregon.edu/~koch/texshop/) , это путь.

**Примечание** . *Получение глоссариев для работы - это немного более совершенная функция LaTeX, и в первые несколько раз может произойти несколько проб и ошибок.*

```
#!/bin/ 

set path = ($path /usr/local/teTeX/bin/powerpc-apple-darwin-current 
    /usr/local/bin) # This is actually a continuation of the line above

set basefile = `basename "$1" .tex`

makeindex -s `kpsewhich basic.gst` -o "${basefile}.gls" "${basefile}.glo"

```

### Сырой HTML

Вы можете включить в свой документ raw (X) HTML. То, что происходит с этими частями, зависит от формата вывода. Вы также можете использовать этот `markdown` атрибут, чтобы указать, что обработка MultiMarkdown должна применяться в HTML-теге уровня блока. Это дополнение к `--process-html`опции командной строки, которая вызывает обработку MultiMarkdown во *всех* HTML-тегах блочного уровня.

Например:

```
<div>This is *not* MultiMarkdown</div>

<div markdown=1>This *is* MultiMarkdown</div>

```

Будет производить следующее `--process-html`:

```
<div>This is *not* MultiMarkdown</div>

<div>This <em>is</em> MultiMarkdown</div>

```

И с `--process-html`:

```
<div>This is <em>not</em> MultiMarkdown</div>

<div>This <em>is</em> MultiMarkdown</div>

```

Однако результаты могут отличаться от ожидаемых при представлении в LaTeX или других форматах. Обычно HTML-уровень блока игнорируется при выводе на LaTeX или ODF. В приведенном выше примере будет приведено следующее, `<div>`полностью исключая первое :

```
This \emph{is} MultiMarkdown

```

И это `--process-html`:

```
This is \emph{not} MultiMarkdown
This \emph{is} MultiMarkdown

```

Вы также заметите, что разрывы строк различаются при выводе на LaTeX или ODF, и это может привести к тому, что содержимое двух `<div>`тегов будет помещено в один абзац.

## Как настроить вывод MultiMarkdown?

По умолчанию я считаю, что MultiMarkdown отлично справляется с выходом по умолчанию для различных форматов вывода. Тем не менее, часто желательно настроить вывод на конкретные нужды.

### Настройка HTML

Самый простой способ настроить вывод HTML - это применять информацию о стиле с помощью [CSS](http://en.wikipedia.org/wiki/CSS) . Вы можете сделать это, связавшись с файлом CSS с [`CSS`метаданными](http://fletcher.github.io/peg-multimarkdown/#css) или вручную включив информацию о стиле в виде [`HTML Header`метаданных](http://fletcher.github.io/peg-multimarkdown/#htmlheader) .

Более продвинутый подход заключается в использовании [XSLT](http://en.wikipedia.org/wiki/XSLT) для пост-обработки вывода HTML и его настройки. Вы также можете писать сценарии на любом языке, с которым вы наиболее знакомы, чтобы обрабатывать вывод по желанию. Вы можете включить эти функции в свой рабочий процесс любым способом, который наилучшим образом подходит для вас.

### Настройка LaTeX

Аналогично, вы можете настроить внешний вид вашего выхода LaTeX при использовании MultiMarkdown. Самый простой способ - использование [`LaTeX Input`метаданных](http://fletcher.github.io/peg-multimarkdown/#latexinput) . Вы можете включить любой действующий код LaTeX в эти файлы, которые вы желаете, и ограничены только вашим творчеством. Вы можете переопределить общие команды по мере необходимости. Вы можете включать различные пакеты или добавлять метаданные по умолчанию. Я рекомендую изучить образцы в [галерее MultiMarkdown,](https://github.com/fletcher/MultiMarkdown-Gallery) чтобы увидеть некоторые настройки, которые я использовал до сих пор.

В дополнение к настройке выходного сигнала существует несколько различных «режимов» работы, когда MultiMarkdown выводит LaTeX. Эти режимы могут создавать различные типы документов и полагаться на общие пакеты. Эти режимы могут быть указаны с помощью [`LaTeX Mode`метаданных](http://fletcher.github.io/peg-multimarkdown/#latexmode) .

#### Режим LaTeX по умолчанию

Режим работы по умолчанию выводит достаточно стандартный LaTeX, который должен быть совместим с большинством основных типов и пакетов документов.

#### Режим Memoir LaTeX

`memoir`Режим генерирует выходной сигнал , предназначенный , чтобы быть совместимым с [пакетом мемуарной](http://www.tex.ac.uk/ctan/macros/latex/contrib/memoir/) . Этот пакет предлагает несколько преимуществ и может использоваться для создания книг, отчетов и других основных форматов документов.

По умолчанию данное Руководство пользователя обрабатывается в формате PDF с использованием класса memoir.

#### Режим Beamer LaTeX

`beamer`Режим генерирует выходной сигнал , предназначенный , чтобы быть совместимым с [пакетом BEAMER](https://bitbucket.org/rivanvx/beamer/wiki/Home) . Этот пакет позволяет легко создавать слайд-шоу в формате PDF (аналогично Keynote от Apple или PowerPoint от Microsoft). Я использовал его для создания «Что такое MultiMarkdown?» [Слайд-шоу] (https://github.com/fletcher/MultiMarkdown-Gallery/raw/master/What-Is-MMD/what_is_mmd.pdf).

### Настройка OPML

На самом деле ничего не нужно настраивать при создании документа OPML, так как это просто другой способ форматирования текстового документа MultiMarkdown.

### Настройка OpenDocument

Файлы OpenDocument используют информацию о стиле так же, как CSS для HTML. Чтобы внедрить информацию о пользовательском стиле, вы можете использовать [`ODF Header` метаданные](http://fletcher.github.io/peg-multimarkdown/#odfheader) . Это вложит ваш XML в заголовок документа. Вам придется разобраться в синтаксисе того, что включать самостоятельно, но это не так сложно, если вы исследуете источник документов, которые вас интересуют для эмуляции.

Поскольку файл OpenDocument Flat Text является XML-файлом, вы также можете использовать [XSLT](http://en.wikipedia.org/wiki/XSLT) для настройки файла по своему желанию.

### Советы и приемы

Есть несколько творческих способов адаптировать вывод, который вы получаете, на основе того формата, который вы экспортируете, особенно с HTML и LaTeX. Эти трюки используют [необработанный LaTeX](http://fletcher.github.io/peg-multimarkdown/#multimarkdownandlatex) и [необработанный HTML](http://fletcher.github.io/peg-multimarkdown/#rawhtml) .

Экспериментируйте, и вы можете придумать какие-то творческие вещи!

## Форматы вывода MultiMarkdown

MultiMarkdown может выводиться в различные форматы. Поведение по умолчанию для каждого формата должно быть довольно хорошим, но каждый формат имеет свои собственные уникальные характеристики, которые иногда требуют корректировки.

### HTML

HTML - это формат по умолчанию для вывода документов MultiMarkdown, поэтому его поведение, как правило, является наиболее предсказуемым.

### Латекс

LaTeX является вторым самым старым форматом вывода для MultiMarkdown, поэтому многие проблемы были разработаны.

### OpenDocument

OpenDocument Text, или, более конкретно, Flat XML или `.fodt`, является более новым форматом для MultiMarkdown, поэтому все еще может быть сделано несколько перегибов.

#### Изображений

При выводе на OpenDocument изображения «связаны» во многом так же, как при создании HTML. Изображения фактически не встроены в сам документ по умолчанию. Это означает, что если вы хотите поделиться документом с кем-то другим, вам также придется делиться изображениями.

Преимущество заключается в том, что изображения будут автоматически обновляться, если оригинал будет изменен.

Если вы хотите вставить изображения в документ, вы можете использовать `Edit:Links:Break Link`элемент меню (или что-то подобное в зависимости от вашего приложения) для встраивания каждого изображения по своему желанию.

#### Размер изображения

Изображения лучше всего работают в OpenDocument, если указаны атрибут высоты и ширины. Если указана только ширина или высота, тогда все будет работать, но изображение может выглядеть неправильно. Если вы укажете размер в процентах, вам, возможно, придется вручную настроить изображение в соответствии с рекомендациями, приведенными в документе.

### OPML

OPML или Outline Processor Markup Language, является основным форматом, который полезен для импорта и экспорта из различных программ [выделения](http://www.omnigroup.com/applications/omnioutliner/) (например, [OmniOutliner](http://www.omnigroup.com/applications/omnioutliner/) ). При использовании с MultiMarkdown вы можете переключаться между редактором и текстовым редактором по мере необходимости для работы над документом. Текстовый редактор, скорее всего, будет проще для написания вашей прозы, и вы можете упростить оформление структуры документа.

#### «Нерегулярные» проблемы иерархии

При использовании Outliner каждый уровень в документе (например `h1`, `h2`и т. Д.) Является дочерним элементом родителя, который является одним уровнем «выше», чем ребенок. Например:

```
## Second Level ##

### Third level ###

This is a child of the level 2 parent, "Second Level"

```

Это вызывает проблемы, если вы попытаетесь «пропустить» уровень:

```
## Second Level ##

#### Fourth level ####

This is *not* a child of the level 2 parent, "Second Level"

```

Если вы используете `multimarkdown`для обработки текстового файла, содержащего такие «пропуски», в OPML, любые «осиротевшие» уровни не будут включены в вывод. Это можно рассматривать как функцию или ограничение в зависимости от ваших потребностей.

## Что нового в MultiMarkdown 3.0?

### Зачем создавать другую версию MultiMarkdown?

- Поддержание растущей коллекции вложенных регулярных выражений будет усложняться. Я не планирую добавлять много (если они есть) на пути новых синтаксических функций, но это был беспорядок.
- Производительность по более длинным документам была низкой. Вложенные регулярные выражения perl были медленными, даже на относительно быстром компьютере. Производительность на чем-то вроде iPhone, вероятно, была бы несчастной.
- Опора на Perl сделала установку довольно сложной в Windows. Это меня не слишком беспокоило, но это фактор.
- Perl нельзя запускать на iPhone / iPad, и я хотел бы иметь MultiMarkdown на устройстве iOS, а не только обычный Markdown (который существует в версиях C).
- Мне было интересно узнать о PEG и пересмотреть программирование на C.
- Синтаксис был довольно стабильным, и было бы неплохо иметь возможность его формализовать, что происходит по определению при использовании PEG.
- Я хотел пересмотреть синтаксис и функции и немного почистить вещи.
- Я упоминал, насколько это быстрее? И что он может (в конце концов) работать на iPhone?

### «Полные» документы против «фрагментов»

«Отрывок» - это раздел HTML (или LaTeX), который не является полным, полностью сформированным документом. Он не содержит информацию заголовка, чтобы сделать его допустимым XML-документом. Он не может быть скомпилирован с LaTeX в PDF без дополнительных команд.

Например:

```
# This is a header #

And a paragraph.

```

Становится следующим фрагментом HTML:

```
<h1 id="thisisaheader">This is a header</h1>

<p>And a paragraph.</p>

```

И следующий фрагмент LaTeX:

```
\part{This is a header}
\label{thisisaheader}


And a paragraph.

```

Не удалось создать фрагмент LaTeX с оригинальным MultiMarkdown, поскольку он полагался на наличие полного документа XHTML, который затем был преобразован в LaTeX через XSLT-документ (требующий целой отдельной программы). Это было мощно, но сложно.

Теперь я пришел по кругу. Теперь peg-multimarkdown будет выводить LaTeX напрямую, не требуя XSLT. Это позволяет при необходимости создавать фрагменты LaTeX или полные документы.

Чтобы создать полный документ, просто включите метаданные. Вы можете включить название, автора, дату или что угодно. Если вы не хотите включать какие-либо реальные метаданные, в том числе «format: complete», все равно будет запускаться полный документ, как и раньше.

**ПРИМЕЧАНИЕ** . Если присутствуют *только* метаданные, `Base Header Level`то полный документ не будет запущен. Это может быть полезно при объединении разных документов.

Старый подход (хотя он был скрыт от большинства пользователей) был немного клочья, и это должно быть более элегантным и более гибким.

### Различия в метаданных

Когда в MultiMarkdown 2.0 повторялись метаданные, второй экземпляр «перезаписывал» первый экземпляр. В MultiMarkdown 3.0 используется каждый экземпляр повторного ключа метаданных. Это необходимо для чего-то вроде того, `LaTeX Input`что может потребовать нескольких экземпляров.

Это означает, что вы не можете «стереть» ненужное значение метаданных, включив вторую, пустую, копию. Это был трюк, используемый, например, для удаления нежелательной информации стиля, вставленной в документ более старыми версиями Scrivener.

### Создание документов LaTeX

Документы LaTeX создаются несколько иначе, чем при старой системе. Вам больше не нужно использовать XSLT-файл для преобразования из XHTML в LaTeX. Вы можете перейти от MultiMarkdown к LaTeX, который быстрее и гибче.

Чтобы создать полный документ LaTeX, вы можете обработать файл как фрагмент, а затем поместить его в шаблон LaTeX, который у вас уже есть. Кроме того, вы можете использовать метаданные, чтобы инициировать создание полного документа. Вы можете использовать `LaTeX Input`метаданные для вставки `\input{file}`команды. Затем вы можете хранить различные файлы шаблонов в своем каталоге texmf и называть их метаданными или встроенными необработанными командами LaTeX в вашем документе. Например:

```
LaTeX Input:        mmd-memoir-header  
Title:              Sample MultiMarkdown Document  
Author:             Fletcher T. Penney  
LaTeX Mode:         memoir  
LaTeX Input:        mmd-memoir-begin-doc  
LaTeX Footer:       mmd-memoir-footer  

```

Это будет включать несколько файлов шаблонов в том порядке, в котором вы видите. `LaTeX Footer`Метаданные вставляет шаблон в конце документа. Обратите внимание, что порядок и размещение `LaTeX Include`заявлений важен.

`LaTeX Mode`Метаданные позволяют указать , что MultiMarkdown следует использовать `memoir`или`beamer` формат вывода. Это приводит к незначительным различиям в выходном документе для совместимости с этими соответствующими классами.

Эта система не так сильна, как подход XSLT, поскольку она не изменяет процесс преобразования MultiMarkdown в LaTeX. Но, вероятно, гораздо более знакомы пользователи LaTeX, привыкшие к использованию `\input{}` команд и не требующие знания XSLT-программирования.

Я рекомендую проверить [файлы поддержки LaTeX](https://github.com/fletcher/peg-multimarkdown-latex-support) по умолчанию , доступные в github. Они призваны служить отправной точкой для ваших нужд.

**Примечание** . Вы можете использовать эту версию MultiMarkdown для преобразования текста в XHTML, а затем обработать XHTML с помощью XSLT для создания документа LaTeX, как и в MMD 2.0.

### Изображений

В HTML, изображения имеют три части «метаданных» , имеющих отношение к MMD - `alt`, `title`и `id`. В Markdown и MultiMarkdown 2.0 они были структурированы следующим образом:

```
This is an image ![alt text](file.png "This is a title")

```

В MultiMarkdown 2.0 «alt text» обрабатывался в «alttext» и использовался как `id`атрибут.

Проблема заключалась в том, что LaTeX, а затем и ODF, действительно не нуждались в метаданных `alt`или `title`метаданных - эти форматы действительно нуждались в *подписке* . Использование заголовка в некоторых форматах, но не в других, приводит к странным несоответствиям в документах, созданных из одного и того же источника MultiMarkdown. И хотя я понимаю различия между атрибутами `alt`и `title`атрибутами, это действительно не имеет большого смысла.

Поэтому вместо этого в MultiMarkdown 3.0 вместо этого используется следующее:

```
This is an image ![This is alt text](file.png "This is a title")

or

This is an image ![Another *alt*][fig]

![This is a *caption*][fig2]

The following image has no `alt` or `caption`:

![][fig2]

[fig]: file2.png "This is another title"
[fig2]: file3.png "This is another title"

```

`id`Атрибут вступает в игру , когда изображение задается в виде ссылки. Это позволяет вам ссылаться на изображение из другого места в документе.

Когда изображение является единственным элементом, составляющим абзац, оно завершается в `<figure>`тег, а вместо `alt`атрибута имеет подпись. Это продемонстрировано `fig2`выше. Этот заголовок используется независимо от формата вывода, обеспечивая согласованность между HTML, LaTeX и ODF. Когда это происходит, тег alt является урезанной версией заголовка, так как он не может иметь никакой разметки.

Так, в MultiMarkdown 3.0, в настоящее время существует 4 части метаданных - `alt`, `title`, `id`и необязательные `caption`. Для описания этих метаданных есть всего три места, поэтому один фрагмент должен быть дублирован. В настоящее время `alt`это дубликат `caption`, без какой-либо разметки. Если изображение содержится в абзаце, создается `alt`атрибут, но нет `caption`.

Альтернативный план, который я рассматриваю, заключается в том, чтобы использовать то, что в настоящее время генерирует `title`атрибут, вместо этого генерирует `alt`атрибут во всех экземплярах, а заголовок можно игнорировать, если изображение не считается фигурой.

### Сноски

Сноски работают несколько иначе, чем раньше. Это отчасти целеустремленно и частично по необходимости. В частности:

- Сноски привязаны на основе числа, а не метки, используемой в источнике MMD. Это не покажет заметной разницы с читателем, но источник XHTML будет другим.
- Сноски могут использоваться более одного раза. Каждая ссылка будет ссылаться на одну и ту же нумерованную заметку, но ссылка «возврат» будет привязана только к первому экземпляру.
- Сноска «возврат» - это отдельный абзац после сноски. Это связано с тем, как работает привязка кодов, и мне не стоит пытаться ее изменить. Вы всегда можете использовать CSS, чтобы изменить внешний вид, как вам нравится.
- Номера сносок окружены «[]» в тексте.

### Сырой HTML

Поскольку оригинальный MultiMarkdown сначала обработал текстовый документ в XHTML, а затем обработал весь документ XHTML в LaTeX, он не мог отличить исходный HTML и HTML от открытого текста. Однако эта версия использует оригинальный текст для создания документа LaTeX. Это означает, что любой необработанный HTML внутри вашего документа MultiMarkdown **не** преобразуется в LaTeX.

Преимущество этого заключается в том, что вы можете вставлять одну часть документа в два формата: один для XHTML и один для LaTeX:

```
<blockquote>
<p>Release early, release often!</p>
<blockquote><p>Linus Torvalds</p></blockquote>
</blockquote>

<!-- \epigraph{Release early, release often!}{Linus Torvalds} -->

```

В этом разделе, когда документ преобразуется в XHTML, `blockquote`разделы будут использоваться, как ожидалось, и `epigraph`будут игнорироваться, так как они находятся внутри комментария. И наоборот, при обработке в LaTeX необработанный HTML-код будет проигнорирован, и комментарий будет обработан как raw LaTeX.

Вам не нужно использовать эту функцию, но если вы хотите точно указать, как определенная часть вашего документа обрабатывается в LaTeX, это аккуратный трюк.

### Математическая поддержка

MultiMarkdown 2.0 поддерживает [ASCIIMathML,](http://www1.chapman.edu/~jipsen/mathml/asciimath.html) встроенный в документы MultiMarkdown. Затем этот синтаксис был преобразован в MathML для вывода XHTML, а затем обработан в LaTeX при создании выхода LaTeX. Преимущество этого заключалось в том, что синтаксис ASCIIMathML был довольно простым. Недостатком было то, что только несколько браузеров фактически поддерживают MathML, поэтому большую часть времени это было полезно только для LaTeX. Многие пользователи MMD, заинтересованные в выходе LaTeX, уже знали LaTeX, поэтому они иногда предпочитали собственный математический синтаксис, что приводило к нескольким хакам.

MultiMarkdown 3.0 не поддерживает поддержку ASCIIMathML. Фактически, мне, вероятно, придется писать парсер с нуля, чтобы делать с ним что-нибудь полезное, чего я мало желаю делать. Поэтому я придумал компромисс.

MultiMarkdown больше не поддерживается ASCIIMathML. Вместо этого вы *можете* использовать LaTeX для кодирования математики в вашем документе. При создании документа LaTeX источник просто передается, и LaTeX обрабатывает его, как обычно. *Если* вы хотите, вы можете добавить строку в свой заголовок при создании документов XHTML, которые позволят [MathJax](http://www.mathjax.org/) правильно отображать вашу математику.

Обычно MathJax *и* LaTeX поддерживали использование `\[ math \]`или `\( math \)`указывали, что математика была включена. MMD наткнулся на это из-за некоторых проблем с экранированием, поэтому вместо этого мы используем `\\[ math \\]`и `\\( math \\)`. См. Пример:

```
latex input:    mmd-article-header  
Title:          MultiMarkdown Math Example  
latex input:    mmd-article-begin-doc  
latex footer:   mmd-memoir-footer  
xhtml header:   <script type="text/javascript"
    src="http://localhost/~fletcher/math/mathjax/MathJax.js">
    </script>


An example of math within a paragraph --- \\({e}^{i\pi }+1=0\\)
--- easy enough.

And an equation on it's own:

\\[ {x}_{1,2}=\frac{-b\pm \sqrt{{b}^{2}-4ac}}{2a} \\]

That's it.

```

Разумеется, вам нужно будет изменить `xhtml header`метаданные, чтобы указать на собственную установку MathJax.

**Примечание** . MultiMarkdown на самом деле ничего не *делает* с кодом внутри скобок. Он просто удаляет лишнюю обратную косую черту и передает источник LaTeX без изменений, где он обрабатывается MathJax, *если* он правильно установлен, или LaTeX. Если у вас возникли проблемы, вы можете отправить электронный [список обсуждения MultiMarkdown](http://groups.google.com/group/multimarkdown/) , но я не поддерживаю код LaTeX.

## Известные вопросы

### Для символов, отличных от ASCII, требуется полный HTML-документ

Для того, чтобы символы, отличные от ASCII, отображались правильно в большинстве браузеров, должно быть некоторое указание на используемый набор символов. Не вдаваясь в слишком много технических деталей, самый простой способ получить вывод HTML для правильного отображения - это включить метаданные, которые будут запускать полный документ, например a `Title`.

### OpenDocument не поддерживает параметры изображения

Сравнительно легко вставить изображение в ODF с использованием фиксированных размеров, но сложнее получить масштабированное изображение, не зная точного соотношения сторон изображения.

Например, в LaTeX или HTML можно указать, что изображение должно масштабироваться до 50% от ширины и автоматически вычислять правильную высоту. Это не работает в ODF, по крайней мере, не в том, что я могу найти.

Вы должны вручную настроить изображение в соответствии с вашим желаемым ограничением. Это легко сделать, просто удерживайте клавишу сдвига при настройке размера изображения, и он, скорее всего, будет привязан к указанному размеру.

Я приветствую предложения относительно лучшего способа сделать это.

### Поддержка Math в OpenDocument отсутствует

Я понял, как встраивать MathML в файл OpenDocument. Существует несколько инструментов для преобразования LaTeX в MathML, включая blahtex.

Я, вероятно, начну с написания служебной программы perl, которая может использовать созданный MMD ODF, а затем проанализировать математические «биты» и вернуть их в MathML.

Еще лучше было бы, если бы я мог понять, как компилировать blahtex в multimarkdown как библиотеку для внутренней обработки .... Не уверен, сколько времени потребуется, чтобы обойти. Любой, у кого есть какие-то особые навыки в этой области, которые хотят помочь, дайте мне знать!

### Поддержка библиографии, отсутствующая в OpenDocument

При создании файла OpenDocument автоматическая обработка цитат не производится. Предложения приветствуются, поскольку я хотел бы предложить разумное решение, если это возможно.

### OPML не обрабатывает «пропущенные» уровни

При преобразовании текстового файла MMD в OPML с двоичным кодом mmd каждый уровень содержит только прямые дочерние элементы. Например:

```
# First Level #

## Second Level  ##

### Third Level ###

## Another Second Level ##

#### Fourth Level ####

```

Когда это преобразуется в OPML, элемент «Четвертый уровень» будет удален, так как он пропускает уровень от своего родителя «Другой второй уровень».

Это можно исправить, но это займет более сложный алгоритм, чем тот, который у меня есть сейчас, и для меня сейчас не очень важно зафиксировать.

Как всегда, приветствуются предложения.

## Вопросы-Ответы

Ответы на общие вопросы о MultiMarkdown. Вклады приветствуются!

**ПРИМЕЧАНИЕ** . Этот раздел документации по-прежнему довольно запутан. Пожалуйста, не стесняйтесь вносить исправления в [вики](https://github.com/fletcher/peg-multimarkdown/wiki/User's-Manual) .

### Часто задаваемые вопросы по Mac OS X

#### MultiMarkdown не будет работать с TextMate

Если вы получите эту ошибку:

```
/bin/bash: line 2: multimarkdown: command not found

```

То вам нужно правильно установить путь в своих настройках, `/usr/local/bin`как показано на скриншоте:

![Это скриншот соответствующих настроек](http://fletcher.github.io/peg-multimarkdown/TextMate-prefs.png)Это скриншот соответствующих настроек

#### Когда я печатаю multimarkdown -v, я получаю команду «не найден»,

У вас должны быть права доступа / usr / local / bin и / usr / local / lib для использования MMD.

Чтобы исправить, введите: sudo chmod go + rx / usr / local и аналогично для подпапок.

Введите пароль администратора и повторите попытку multimarkdown -v.

### FAQ по Windows

#### Как создать приложение перетаскивания для Windows?

В Windows XP перейдите в место, где вы хотите разместить ярлык, а затем:

- щелкните правой кнопкой мыши
- Выберите «Создать-> Ярлык»
- Введите «multimarkdown» в качестве местоположения элемента
- Выберите нужное имя для ярлыка
- Щелкните правой кнопкой мыши новый ярлык и выберите «Свойства»,
- Вы можете добавить любые необходимые параметры командной строки в конце свойства «Target» - вы должны обязательно включить «-b», чтобы включить пакетный режим. Остальные зависят от вас.

### FAQ по Linux

### FAQ по HTML

#### Когда я пытаюсь преобразовать в HTML, мой документ попадает в метаданные

Вы используете автоматизированный инструмент для создания «полного» контента. Инструмент добавляет `format: complete`метаданные для вас, но у вас нет других метаданных в вашем документе.

Начните свой документ с пустой строки, чтобы указать, что метаданных больше нет.

Это должно произойти только с инструментами, разработанными для MultiMarkdown 2.0

#### Почему символы не-ASCII отображаются правильно?

Для отображения символов, отличных от ASCII, необходим «полный» HTML-документ - «фрагмент» не работает. Просто включите некоторые метаданные, чтобы принудительно завершить создание документа.

Это справедливо и для генератора QuickLook.

### Вопросы по LaTeX

#### Что такое LaTeX и как его использовать?

[LaTeX](http://en.wikipedia.org/wiki/LaTeX) - это синтаксис для описания того, как преобразовать выделенный текст в высококачественные, набираемые документы. MultiMarkdown использует LaTeX для создания PDF-файлов из вашего документа MMD.

Следует отметить, что MultiMarkdown не обрабатывает файлы LaTeX для вас. Он генерирует их и полагается на вас, чтобы преобразовать LaTeX в PDF. Точные команды, которые вам нужны, могут отличаться, но я использую следующую последовательность в моем вспомогательном скрипте, чтобы включить все функции, которые я использую.

```
latexmk file.tex            # This command will do most of the work
makeglossaries file.tex     # process glossary entries if they exist
pdflatex file.tex           # I found that sometimes an extra run
pdflatex file.tex           # or two is needed
latexmk -c file.tex         # clean up a bunch of the temp files

```

#### Как я могу использовать raw LaTeX (или другой код) с MultiMarkdown?

Все, что помещается в комментарий HTML, будет передаваться без изменений - это может включать в себя необработанный код LaTeX. Например:

```
This is raw LaTeX: <!-- e^{i \cdot \pi} = -1 -->

```

Будет генерировать:

```
This is raw LaTeX: e^{i \cdot \pi} = -1 

```

Дополнительную информацию см. В разделе [MultiMarkdown и LaTeX](http://fletcher.github.io/peg-multimarkdown/#multimarkdownandlatex) .

#### Мой LaTeX не будет компилироваться - что случилось?

Во-первых - подавляющее большинство времени, это не проблема MMD, а проблема LaTeX или (честно) ошибка пользователя. Очень часто бывают случаи, когда MMD создает недопустимый вывод LaTeX при подаче необычного ввода, но это редко.

Убедитесь, что у вас установлены правильные метаданные, позволяющие скомпилировать LaTeX. См. [Примеры](https://github.com/fletcher/MultiMarkdown-Gallery) документов из [галереи MultiMarkdown](https://github.com/fletcher/MultiMarkdown-Gallery) для некоторых примеров того, какие метаданные необходимы для разных типов документов /

Если у вас возникли проблемы с более сложным инструментом MMD (например, с пакетом TextMate или с перетаскиванием), используйте подход командной строки, когда у вас действительно возникают трудности. Посмотрите, будет ли ваш документ компилироваться в HTML с помощью `multimarkdown`команды. После того, как вы заработаете, попробуйте перейти на LaTeX, а затем в PDF (если это ваша цель).

Если это не сработает, вам необходимо отследить источник ошибки. Лучший подход аналогичен старой программе Conflict Catcher. Продолжайте разделять документ пополам и проверяйте каждую половину. Половина, вероятно, скомпилируется без жалобы, а другая - нет. Возьмите проблему наполовину и повторите этот процесс, пока не сможете найти абзац, предложение, слово, которое вызывает ошибку.

Используя настоящий текстовый редактор (например, [TextMate](http://macromates.com/) ), просмотрите раздел проблем и обязательно просмотрите невидимые символы и найдите что-то странное. Если вы не можете этого сделать, вы также можете удалить ошибочное предложение и повторно ввести его ( *не*копировать и вставлять - вы просто реплицируете проблему).

Если ни одна из этих проблем не устраняет проблему, [отправьте](http://groups.google.com/group/multimarkdown) раздел проблем в [Список обсуждения MultiMarkdown,](http://groups.google.com/group/multimarkdown) и вы, скорее всего, узнаете, что делаете неправильно. Или, может быть, вы обнаружили ошибку, и я ее исправлю. ;)

#### TextMate не будет создавать PDF-файл

MultiMarkdown 2.0 включал команду для создания PDF «автоматически» из файла MultiMarkdown. Это привело к множеству путаницы и вопросов от пользователей, которые не понимали, что происходит (например, MMD создает файл LaTeX и что pdflatex создает PDF).

MultiMarkdown 3.0 *официально* не поддерживает создание PDF-файла. Он поддерживает создание файла *LaTeX* . Затем вы ответственны за создание PDF.

Тем не менее, есть сценарий, `mmd2pdf`который выполняет некоторые из этих команд для вас. Если у вас есть проблемы с этим, вы сами. Попробуйте запустить соответствующие команды LaTeX в терминале вручную, чтобы создать свой PDF-файл.

### Часто задаваемые вопросы OPML

### Часто задаваемые вопросы по OpenDocument

#### Мой файл FODT, созданный MultiMarkdown, открывается как пустой документ

Возможно, ваш исходный файл MMD создал неверный XML-файл в файле FODT. Попробуйте проверить XML (одним удобным способом является открытие файла FODT в Firefox). Если вы получите сообщение об ошибке, обратите внимание на номер строки, откройте файл FODT в текстовом редакторе, чтобы найти, где в вашем документе произошла ошибка, а затем соответствующим образом скорректируйте исходный файл MMD.

### Вопросы по синтаксису

#### Как разбить документ MultiMarkdown на несколько частей?

MultiMarkdown предназначен для обработки одного документа за раз, но иногда может быть полезно разделить более длинный документ на несколько частей. Например, данное Руководство пользователя разделено на несколько страниц в вики, а затем объединено для обработки с помощью MultiMarkdown.

В пакете [MMD-Support](https://github.com/fletcher/MMD-Support) имеется скрипт утилиты, `mmd_merge`который может сшить несколько текстовых файлов. Он считывает входной файл, который описывает, какие файлы необходимо объединить, в каком порядке и на каком «уровне». Это позволяет убедиться, что уровни заголовков настроены соответствующим образом при объединении документа.

Например, `index.txt`файл, используемый для объединения этого Руководства пользователя:

```
# User's guide #

metadata.txt

Introduction.md

How-do-I-install-MultiMarkdown?.md

How-do-I-use-MultiMarkdown?.md

How-do-I-create-a-MultiMarkdown-document?.md

How-do-I-customize-MultiMarkdown-Output?.md

MultiMarkdown-Output-Formats.md

What's-different-in-MultiMarkdown-3.0?.md

Known-Issues.md

FAQ.md

Acknowledgments.md

```

Как вы видите выше, я использую отдельный текстовый файл для хранения метаданных. Линии, которые начинаются `#`, считаются комментариями.

Если вы хотите указать, что определенный файл должен иметь уровни заголовков, вы можете вставить один или несколько символов табуляции перед именем файла. Это аналогично изменению `Base Header Level`метаданных для этого файла.

**ПРИМЕЧАНИЕ** . `mmd_merge`Это скрипт Perl, поэтому для его использования требуется, чтобы Perl был установлен.

#### Как мне связать изображение?

Если вы хотите ссылаться на изображение, включенное в документ, вы должны определить изображение, используя ссылочный синтаксис. Он также должен быть в его собственном абзаце. Затем создайте явную ссылку на метку (строчный, без пробелов, никаких специальных символов):

```
This is an image

![Alt Text][image label].

[image label]: /path/to/image.png "This is a title"

And now a link the desired [image](#imagelabel).

```

#### Идентификатор ссылки не работает с дефисами

Не становясь слишком техничным, вы должны быть осторожны, когда включаете несколько дефисов и указываете ссылки или изображения по ссылке.

```
This is an ![image-1].

This is the same image, but looks different --- ![image--1].

This is a different image ![image---1].

[image-1]: file.png     "This is used"
[image--1]: file2.png   "This is ignored"
[image---1]: file3.png  "This is used"

```

Это происходит потому , `-`и `--`оба преобразуются в `en-dash`, в то время как `---`это `em-dash`.

### Общие вопросы

#### Как установить MMD?

Посмотрите, [как установить MultiMarkdown? ](http://fletcher.github.io/peg-multimarkdown/#howdoiinstallmultimarkdown),

#### Как удалить MMD?

Установщик Mac для MultiMarkdown устанавливает следующие файлы:

- /usr/local/lib/libglib-2.0.0.dylib
- /usr/local/lib/libintl.8.0.2.dylib
- /usr/local/lib/libintl.8.dylib
- /usr/local/lib/libintl.dylib
- / USR / местные / бен / MultiMarkdown
- / USR / местные / бен / MMD
- / USR / местные / бен / mmd2odf
- / USR / местные / бен / mmd2opml
- / USR / местные / бен / mmd2pdf
- / USR / местные / бен / mmd2tex

Установщик Windows включает в себя деинсталлятор.

Для Linux просто удаляйте файлы, куда бы вы их не поместили.

#### Как я могу лучше изучить Синтаксис MultiMarkdown?

Синтаксис MultiMarkdown может быть проблемой для начинающих, особенно когда речь заходит о синтаксисе Table и Link. Задача заключается в понимании того, как она выглядит *после* преобразования.

Официальный текстовый редактор MultiMarkdown для Mac - [MultiMarkdown Composer] (http://multimarkdown.com/), распространяемый компанией MultiMarkdown Software, LLC в Mac App Store. MultiMarkdown Composer - это текстовый редактор для Mac, разработанный с нуля вокруг синтаксиса MultiMarkdown. Он разработан, чтобы сделать запись в MultiMarkdown еще проще, чем она есть, с автоматическим подсветкой синтаксиса, встроенными превью, простой экспорт в любой формат, поддерживаемый MultiMarkdown, и многое другое!

Для пользователей Mac вы можете скачать бесплатную программу NValt ( [http://brettterpstra.com/code/](http://brettterpstra.com/code/) ), которая содержит режим предварительного просмотра. Таким образом, вы можете ввести уценку с помощью динамического окна предварительного просмотра, чтобы показать, как выглядит форматирование. Я нашел это полезным, пока мне не понравилось синтаксис.

Также обратите внимание, что MultiMarkdown также можно установить в MarsEdit ( [http://red-sweater.com/marsedit/](http://red-sweater.com/marsedit/) ), который также имеет режим предварительного просмотра. Это еще более эффективно для блоггеров, поскольку оно будет обрабатывать встроенную загрузку изображения в самое популярное программное обеспечение блога и отображать интерпретируемый вывод вашего синтаксиса MMD.

Если вы заинтересованы в веб-обучении, вы можете попробовать[http://peg.gd/,](http://peg.gd/) который предоставляет веб-сайт для написания синтаксиса и отображения Markdown. Вы также можете сохранить страницы для пересылки другим людям.

Для обратного требования вы можете посетить [http://heckyesmarkdown.com/,](http://heckyesmarkdown.com/) который попытается взять данную HTML-страницу и преобразовать ее в Markdown, как правило, с хорошей точностью.

#### Могу ли я использовать MultiMarkdown на iPhone / iPad?

Версия MultiMarkdown Composer разрабатывается для iPhone и iPad. После выпуска Composer 2.0 для Mac, код iOS должен быть обновлен до новой кодовой базы. У меня нет расчетной даты, когда это будет завершено.

[Nebulous Notes](http://nebulousapps.net/) теперь поддерживает MultiMarkdown в дополнение к регулярному Markdown.

Существует ряд программ, доступных для использования на iPhone и iPad, которые поддерживают регулярный Markdown, но не MultiMarkdown (пока!).

[Элементы](http://www.secondgearsoftware.com/elements/) - приложение для iPhone / iPad, которое также имеет режим предварительного просмотра уценки. Second Gear также сделал[MarkdownMail,](http://www.secondgearsoftware.com/markdownmail/) который проще, но также очень полезен для обучения Markdown.

[Textastic](http://www.textasticapp.com/) - это текстовый редактор подсветки синтаксиса для iPad, который включает режим предварительного просмотра для Markdown. Он даже предвидит уравнения MathJax, если вы включите правильные метаданные и рабочую установку MathJax!

#### Как устранить ошибку?

Сначала проверьте некоторые основы:

- Вы используете MultiMarkdown 2.0 или 3.0?
- Вы используете последнюю версию своей версии?
- Если вы используете приложение (Scrivener, TextMate и т. Д.), Работает ли MultiMarkdown из командной строки?
- Если вы используете LaTeX, установили ли вы подходящие файлы поддержки?
- Вы прочитали Руководство пользователя? (Да, я тоже не люблю руководства, но некоторые аспекты MultiMarkdown могут быть довольно сложными, и именно там возникает большинство вопросов)
- Это известная проблема в [github] (https://github.com/fletcher/peg-multimarkdown/issues) или в [списке обсуждений] (http://groups.google.com/group/multimarkdown/)?

Если у вас все еще есть проблемы, сначала вам нужно выяснить, какая у вас ошибка:

- Исходный документ сбрасывает multimarkdown - это *очень* редко и может быть подтверждено попыткой конвертировать текст в HTML. Используйте подход « [Разделить и завоевать](http://fletcher.github.io/peg-multimarkdown/#divideandconquer) », чтобы найти часть проблемы и отправить ее в список обсуждений.
- Вы успешно создаете LaTeX, но не можете его скомпилировать - см. Раздел об устранении неполадок [LaTeX](http://fletcher.github.io/peg-multimarkdown/#latexwontcompile) выше.
- Вы успешно создаете документ, но он не будет открываться должным образом (это обычно происходит с OpenDocument, но может быть и другими форматами) - используйте подход « [Разделить и побеждать](http://fletcher.github.io/peg-multimarkdown/#divideandconquer) », чтобы найти проблему и отправить ее в список обсуждений.
- Полученный результат не соответствует ожидаемому - прочитайте соответствующий раздел руководства и сравните свои результаты с некоторыми примерами документов. Убедитесь, что использование синтаксиса верное. Если у вас все еще есть проблемы, отправьте электронное письмо в список обсуждений.

Если вы отправляете отчет об ошибке в список обсуждений, обязательно выполните следующие действия:

- Сузить проблему до наименьшего примера, который реплицирует проблему
- Обязательно укажите свой вход, полученный результат и результат, который вы ожидаете получить
- Если вы уверены, что это проблема с MultiMarkdown, используйте трекер [ошибок в github](https://github.com/fletcher/peg-multimarkdown/issues) , в противном случае [список обсуждений] (http://groups.google.com/group/multimarkdown/).

#### Как найти источник ошибки?

Когда у вас есть более длинный документ, который MultiMarkdown не может успешно обработать, полезно сузить фактический источник проблемы. Я рекомендую вам рекурсивно разделить документ пополам, пока не дойдете до источника проблемы. Я также называю эту технику «Разделить и покорить».

В принципе, разделите свой документ на две половины и попробуйте обработать каждый отдельно. Если одна половина работает, а другая - нет, проблема, вероятно, будет в половине, которая не будет компилироваться. Продолжайте рекурсивно делить кусок проблемы пополам, пока вы не займете актуальной проблемой.

Имейте в виду, что некоторые части документа потенциально должны быть включены в обе половины для надлежащего тестирования - например, метаданные и определение любых изображений или ссылок по ссылке.

Очевидно, что если для ошибки требуется две части документа, и одна часть находится в начале, а другая - в конце, этот подход может не локализовать проблему. Таким образом, это не идеально, но весьма полезно.

#### Как мне получить дополнительную помощь?

На [веб-сайте](http://fletcherpenney.net/multimarkdown/help/) MultiMarkdown описаны различные способы получения справки.

#### Как я могу внести вклад в MultiMarkdown?

На [веб-сайте](http://fletcherpenney.net/support/) MultiMarkdown описаны различные способы поддержки или участия в проекте MultiMarkdown.

Спасибо, что подумали!

#### Какие идеи существуют для будущего MultiMarkdown?

##### Более сложный синтаксис для таблиц

Несколько пользователей написали предложения с дополнительным синтаксисом для таблиц, чтобы позволить ячейкам охватывать несколько строк, чтобы позволить источнику MMD для одной строки таблицы охватывать несколько строк текста и т. Д.

Меня беспокоит то, что таблица должна быть легко понята простым текстом без излишней разметки. В идеале не было бы разметки, но это слишком сложно, чтобы MMD определил, что означает макет.

Я приветствую предложения, но я планирую быть несколько строгим на этом .... И помните, что для сложных таблиц вы всегда можете ввести необработанный HTML.

##### Синтаксис добавления форм?

Это вряд ли произойдет, но кажется, что добавление какого-то базового синтаксиса для управления формами было бы довольно простым и не очень навязчивым. Что-то вроде:

```
Please check all that apply:

[ ] Option A
[ ] Option B
[ ] Option C

Please choose one of the following:

( ) Option A
( ) Option B
( ) Option C

Please enter your first name:

[_______________________]

```

Идея заключалась бы в том, чтобы позволить вам легко вводить необходимые поля для формы, но не нужно беспокоиться о глупости HTML .... Как всегда, ввод приветствуется.

##### Как мне представить идею для MultiMarkdown?

Во-первых, моя цель с MultiMarkdown - *не* продолжать добавлять множество функций. Больше - не всегда лучше.

Если есть функция, без которой вы не можете жить, и вы заинтересованы в представлении своей идеи, подумайте:

- Может ли ваша идея быть выполнена с существующей настройкой - например, с помощью XSLT или сценария быстрой пост-обработки, чтобы преобразовать вывод по умолчанию в желаемый результат?
- Предлагает ли источник сырья, который вы предлагаете, естественно для читателя? Чем меньше разметка, тем лучше - необработанный MultiMarkdown должен выглядеть как нечто написанное и для людей, а не для компьютера.
- Сколько людей нуждается в этой функции? MultiMarkdown уже давно существует - почему кто-то еще не запросил эту функцию, если это так важно?

Если вы чувствуете, что ваша идея должна быть включена в MultiMarkdown, отправьте ее в список обсуждений, и я обязательно ее рассмотрю.

##### Что такое ПЭГ?

PEG или [грамматика выражения Parsing] (http://en.wikipedia.org/wiki/Parsing_expression_grammar) - это метод описания формальной грамматики для синтаксического анализа входного языка. Джон МакФарлейн использовал ПЭГ для создания [уклона](https://github.com/jgm/peg-markdown) . Затем я изменил его работу, чтобы создать MultiMarkdown 3.0.

#### Что случилось с выходом RTF?

Во-первых - RTF - действительно уступающий формат документа. Данный RTF-документ будет иметь разные представления при открытии с различными приложениями или даже в одном приложении в разных операционных системах. Реализация RTF от Apple сильно отличается от Microsoft, которая отличается от реализации всех остальных. Трудно воспринимать RTF всерьез как формат документа, когда он, кажется, обрабатывается по-разному везде, где вы смотрите.

Как ни странно, MultiMarkdown никогда *не* поддерживал RTF. Первоначальный подход к генерации RTF-вывода состоял в том, чтобы преобразовать в HTML, а затем использовать `textutil`команду Apple для преобразования в RTF. Это можно сделать через терминал или просто использовать TextEdit, чтобы открыть HTML, а затем сохранить как RTF - это фактически делает то же самое, за исключением того, что этот подход также может обрабатывать изображения.

Второй подход был начат, но не был завершен - `xhtml2rtf.xslt` файл использовался для преобразования HTML в RTF с помощью таблицы стилей XSL. Этот подход никогда не был завершен, но также может быть обновлен для работы с генерируемым HTML-выходом MMD 3.

Из-за этого RTF «поддержка» больше не включается в MMD. Вы можете легко изменить сценарий оболочки, чтобы передать команду HTML с помощью `textutil -convert rtf -stdout`команды и сохранить в нужное имя файла, как в MMD 2.0. Но подход, который дает лучшие результаты, заключается в использовании формата Flat OpenDocument. Это можно открыть в LibreOffice или OpenOffice, а затем сохранить в большое количество форматов документов.

Лучший подход может заключаться в том, чтобы придерживаться `.fodt`формата или более распространенной версии `.odt`. Но это скорее «политическое» мнение, чем техническое.

## Подтверждения

Спасибо отдельным лицам и группам за их вклад в улучшение Markdown и MultiMarkdown:

- Джон Грубер
- Мишель Фортин
- Джонатан Вебер
- Марк Эли Кальдерон
- Чоан К. Гальвес
- Доктор Дранг
- Роберт МакГонегал
- Дэвид Грин
- Трей Пикард
- Салим
- Мелинда Норрис
- Шон Уоллес
- Аллан Одгаард
- Стефан Бранчен
- Кит Блаунт
- Герд Нопс
- Джон Пурнелл
- Джонатан Куломб (особая благодарность за помощь в устранении неполадок MMD 3.0!)
- Джейсон Бандлоу
- Йоаким Херце
- Ки-Лин Стивен Чан
- Василий Ярошевич
- Мэтт Нойбург
- Джеймс Хоуфинг
- Эдвард Никсон
- etherean
- Özgür Gökmen
- Чад Шмидт
- Грег (гр)
- Бен Дженнингс
- Сильван Кайзер
- Томас Доран
- Роб Уолтон
- Дэн Роландер
- Duoyi wu
- Дэн Даскалеску
- Ингольф Шефер
- Крис Бунч
- Обломов
- Алекс Мелхуиш
- Стефан Мюллер
- Джош Браун
- Человек Роба
- Мэтью Д. Рэнкин
- Давид Чиаркевич
- Joonas Pulakka
- ipetraka
- Джон МакФарлейн (особая благодарность за создание [привязки кодов](https://github.com/jgm/peg-markdown) и помощь в создании MMD 3.0!)
- Дэвид Спаркс
- Кэти Флойд
- Даниэль Мюллер
- Даниэль Джалкут (особая благодарность за помощь в устранении glib-зависимостей!)
- Джон Сковрон
- Джейк Уокер
- Майкл Хейлеманн

И другие, которых я наверняка забыл ....

В дополнение к основному `peg-markdown`коду, MultiMarkdown 3.0 использует библиотеки `glib2`и `intl`библиотеки, входящие в состав [GTK +](http://www.gtk.org/)и лицензированные под GNU LGPL 2.1. Кроме того, он использует [`peg`и`leg`](http://piumarta.com/software/peg/) создает фактический синтаксический анализатор.