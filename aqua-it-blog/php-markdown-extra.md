php Markdown Extra

Markdown Extra является расширением PHP Markdown, реализующим некоторые функции, которые в настоящее время недоступны с простым синтаксисом Markdown. Markdown Extra доступен как отдельный класс парсера в PHP Markdown Lib .

В этом документе объясняются изменения и дополнения синтаксиса Markdown, реализованные Markdown Extra. Перед чтением этого документа вы уже должны ознакомиться с оригинальной синтаксической документацией Markdown.

Встроенный HTML
Markdown внутри HTML-блоков
Специальные атрибуты
Огороженные кодовые блоки
таблицы
Списки определений
Сноски
Вывод
Сокращения
Упорядоченные списки
акцент
Сбой обратной косой черты
Встроенный HTML

С Markdown вы можете вставить HTML прямо в середине текста. Это очень полезно, когда вам нужны некоторые функции, не предусмотренные синтаксисом Markdown, но которые легко сделать с HTML.

Но Markdown имеет серьезные ограничения, когда речь идет о блочных элементах. Из документации синтаксиса Markdown:

HTML элементы уровня блока» , например <div>, <table>, <pre>, <p>и т.д.» должен быть отделен от окружающего содержимого пустыми строками, а начальные и конечные теги блока не должны быть отступы с табуляцией или пробелами.
Эти ограничения были сняты в Markdown Extra и заменены этими менее ограничительными двумя:

Открытый тег элемента блока не должен быть отступом более чем на три пробела. Любой тег с отступом больше, чем это будет рассматриваться как блок кода в соответствии со стандартными правилами Markdown.

Когда элемент блока находится внутри списка, все его содержимое должно быть отступом с таким же объемом пространства, что и элемент списка с отступом. (Больше отступов не наносит никакого вреда, пока первый открывающий тег не имеет слишком большого отрезка, а затем становится блоком кода - см. Первое правило).

Markdown внутри HTML-блоков

Раньше в Markdown вы не могли отформатировать содержимое в формате Markdown внутри <div>элемента. Это потому, что <div>это элемент блока, а простой Markdown не форматирует содержимое такого.

Markdown Extra дает вам возможность помещать текст в формате Markdown внутри любого тега блока. Вы делаете это, добавляя markdownатрибут к тегу со значением, 1которое дает markdown="1"- вот так:

<div markdown="1">
This is *true* markdown text.
</div>
markdown="1"Атрибут будет раздел и <div>«содержание s будет преобразовано из Markdown в HTML. Конечный результат будет выглядеть так:

<div>

<p>This is <em>true</em> markdown text.</p>

</div>
Markdown Extra достаточно умен, чтобы применить правильное форматирование в зависимости от элемента блока, на который вы положили markdownатрибут. Если вы примените markdownатрибут к <p>тегу, например, он будет создавать только элементы уровня span внутри - это не позволит списки, блокировки, блоки кода.

Но это некоторые случаи, когда это неоднозначно, например, например:

<table>
<tr>
<td markdown="1">This is *true* markdown text.</td>
</tr>
</table>
Ячейка таблицы может содержать элементы span и block. В таких случаях, как этот, Markdown Extra применит только правила уровня диапазона. Если вы хотите включить конструкторы блоков, просто напишите markdown="block"вместо этого.

Специальные атрибуты

С помощью Markdown Extra вы можете установить атрибут id и class для определенных элементов, используя блок атрибутов. Например, поместите желаемый идентификатор с префиксом хеша внутри фигурных скобок после заголовка в конце строки, например:

Header 1            {#header1}
========

## Header 2 ##      {#header2}
Затем вы можете создавать ссылки на разные части одного документа:

[Link back to header 1](#header1)
Чтобы добавить имя класса, которое можно использовать как крючок для таблицы стилей, используйте такую ​​точку:

## The Site ##    {.main}
Вы также можете добавить собственные атрибуты, имеющие простые значения, указав имя атрибута, за которым следует знак равенства, за которым следует значение (которое в это время не может содержать пробелов):

## Le Site ##    {lang=fr}
Идентификатор, несколько имен классов и другие настраиваемые атрибуты можно комбинировать, помещая их в один и тот же специальный блок атрибутов:

## Le Site ##    {.main .shine #the-site lang=fr}
В это время специальные блоки атрибутов могут использоваться с

заголовки,
Блокированные кодовые блоки,
Ссылки и
изображений.
Для изображения и ссылок поставьте специальный блок атрибутов сразу же после скобки, содержащей адрес:

[link](url){#id .class}  
![img](url){#id .class}
Или, используя ссылки ссылки и изображения, поместите их в конец строки определения следующим образом:

[link][linkref] or [linkref]  
![img][linkref]

[linkref]: url "optional title" {#id .class}
Огороженные кодовые блоки

Markdown Extra ввел код синтаксического кода без отступов. Блокированные кодовые блоки похожи на обычные кодовые блоки Markdown, за исключением того, что они не имеют отступов и вместо этого полагаются на строки начала и конца забора, чтобы разделить блок кода. Блок кода начинается с строки, содержащей три или более ~символа тильды , и заканчивается первой строкой с таким же количеством тильд ~. Например:

This is a paragraph introducing:

~~~~~~~~~~~~~~~~~~~~~
a one-line code block
~~~~~~~~~~~~~~~~~~~~~
Вы также можете использовать обратные `символы для тильды:

``````````````````
another code block
``````````````````
В отличие от их отступов, блокированные блоки кода могут начинаться и заканчиваться пустыми строками:

~~~

blank line before
blank line after

~~~
Блокированные блоки кода не могут использоваться сразу же после списка, поскольку отступ списка имеет приоритет; Блокированный кодовый блок не имеет такого ограничения:

1.  List item

    Not an indented code block, but a second paragraph
    in the list item

~~~~
This is a code block, fenced-style
~~~~
Блокированные блоки кода также идеальны, если вам нужно вставить код в редактор, который не имеет команды для увеличения отступа блока текста, например текстового поля в вашем веб-браузере.

Вы можете указать имя класса, которое будет применяться к блоку кода. Это полезно, если вы хотите по-разному разбить коды кода в зависимости от языка. Или вы также можете использовать его, чтобы указать синтаксис highlighter, какой синтаксис использовать.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~ .html
<p>paragraph <b>emphasis</b>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Имя класса помещается в конце первого забора. Ему может предшествовать точка, но это не является обязательным требованием. Вы также можете использовать специальный блок атрибутов:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~ {.html #example-1}
<p>paragraph <b>emphasis</b>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
В выводе HTML атрибуты блока кода будут применены к codeэлементу; Если вы хотите увидеть их на preэлементе вместо этого, задайте переменную конфигурации code_attr_on_preв синтаксическом анализаторе true. Подробнее см. Ссылку на конфигурацию .

таблицы

Markdown Extra имеет собственный синтаксис для простых таблиц. «Простая» таблица выглядит так:

| First Header                             | Second Header                            |
| ---------------------------------------- | ---------------------------------------- |
| Content Cell                             | Content Cell                             |
| Content Cell                             | Content Cell                             |
| Первая строка содержит заголовки столбцов; Вторая строка содержит обязательную разделительную линию между заголовками и контентом; Каждая следующая строка - это строка в таблице. Столбцы всегда разделяются | символом pipe ( ). После преобразования в HTML результат выглядит следующим образом: |

<table>
<thead>
<tr>
  <th>First Header</th>
  <th>Second Header</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Content Cell</td>
  <td>Content Cell</td>
</tr>
<tr>
  <td>Content Cell</td>
  <td>Content Cell</td>
</tr>
</tbody>
</table>
Если вы хотите, вы можете добавить ведущую и хвостовую трубу в каждую строку таблицы. Используйте форму, которая вам нравится. В качестве иллюстрации это даст тот же результат, что и выше:

| First Header | Second Header |
| ------------ | ------------- |
| Content Cell | Content Cell  |
| Content Cell | Content Cell  |
Примечание. Таблице требуется по крайней мере одна труба в каждой строке для Markdown Extra для правильного ее анализа. Это означает, что единственным способом создания таблицы с одним столбцом является добавление в каждую строку ведущего или хвостового трубопровода или обоих из них.

Вы можете указать выравнивание для каждого столбца, добавив двоеточия в строки разделителя. Двоеточие слева от разделительной линии будет выровнять по столбцу; Двоеточие справа от линии сделает столбец выравниванием по правому краю; Двоеточия с обеих сторон означает, что столбец выровнен по центру.

| Item     | Value |
| -------- | ----: |
| Computer | $1600 |
| Phone    |   $12 |
| Pipe     |    $1 |
alignАтрибут HTML применяется к каждой ячейке соответствующего столбца.

Вы можете применить форматирование на уровне диапазона к содержимому каждой ячейки, используя обычный синтаксис Markdown:

| Function name | Description                |
| ------------- | -------------------------- |
| `help()`      | Display the help window.   |
| `destroy()`   | **Destroy your computer!** |
Списки определений

Markdown Extra реализует списки определений. Списки определения составлены из терминов и определений этих терминов, как в словаре.

Простой список определений в Markdown Extra состоит из однострочного термина, за которым следует двоеточие и определение для этого термина.

Apple
:   Pomaceous fruit of plants of the genus Malus in 
    the family Rosaceae.

Orange
:   The fruit of an evergreen tree of the genus Citrus.
Термины должны быть отделены от предыдущего определения пустой строкой. Определения могут охватывать несколько строк, и в этом случае они должны быть отступом. Но вам действительно не нужно: если вы хотите быть ленивым, вы можете забыть отступать определение, охватывающее несколько строк, и оно все равно будет работать:

Apple
:   Pomaceous fruit of plants of the genus Malus in 
the family Rosaceae.

Orange
:   The fruit of an evergreen tree of the genus Citrus.
Каждый из предыдущих списков определений даст тот же результат HTML:

<dl>
<dt>Apple</dt>
<dd>Pomaceous fruit of plants of the genus Malus in 
the family Rosaceae.</dd>

<dt>Orange</dt>
<dd>The fruit of an evergreen tree of the genus Citrus.</dd>
</dl>
Колонки как маркеры определения обычно начинаются с левого поля, но могут быть отступом до трех пробелов. Перед маркерами определения должно следовать одно или несколько пробелов или вкладка.

В списках определения может быть несколько определений, связанных с одним термином:

Apple
:   Pomaceous fruit of plants of the genus Malus in 
    the family Rosaceae.
:   An American computer company.

Orange
:   The fruit of an evergreen tree of the genus Citrus.
Вы также можете связать более одного термина с определением:

Term 1
Term 2
:   Definition a

Term 3
:   Definition b
Если определению предшествует пустая строка, Markdown Extra обернет определение <p>тегами в выход HTML. Например, это:

Apple

:   Pomaceous fruit of plants of the genus Malus in 
    the family Rosaceae.

Orange

:    The fruit of an evergreen tree of the genus Citrus.
Превратится в это:

<dl>
<dt>Apple</dt>
<dd>
<p>Pomaceous fruit of plants of the genus Malus in 
the family Rosaceae.</p>
</dd>

<dt>Orange</dt>
<dd>
<p>The fruit of an evergreen tree of the genus Citrus.</p>
</dd>
</dl>
И точно так же, как и обычные элементы списка, определения могут содержать несколько абзацев и включать в себя другие элементы уровня блока, такие как блок-таблицы, блоки кода, списки и даже другие списки определений.

Term 1

:   This is a definition with two paragraphs. Lorem ipsum 
    dolor sit amet, consectetuer adipiscing elit. Aliquam 
    hendrerit mi posuere lectus.
    
    Vestibulum enim wisi, viverra nec, fringilla in, laoreet
    vitae, risus.

:   Second definition for term 1, also wrapped in a paragraph
    because of the blank line preceding it.

Term 2

:   This definition has a code block, a blockquote and a list.

        code block.

    > block quote
    > on two lines.
    
    1.  first list item
    2.  second list item
Сноски

Сноски работают в основном как ссылки в стиле ссылок. Сноска состоит из двух вещей: маркера в тексте, который станет надстрочным номером; Определение сноски, которое будет помещено в список сносок в конце документа. Сноска выглядит так:

That's some text with a footnote.[^1]

[^1]: And that's the footnote.
Определения сносок можно найти в любом месте документа, но сноски всегда будут перечислены в том порядке, в котором они связаны в тексте. Обратите внимание, что вы не можете сделать две ссылки на одни и те же сноски: если вы попытаетесь, ссылка на вторую сноску останется в виде обычного текста.

Каждая сноска должна иметь четкое имя. Это имя будет использоваться для ссылки на ссылки сносок на определения сносок, но не влияет на нумерацию сносок. Имена могут содержать любой символ, действительный в idатрибуте в HTML.

Сноски могут содержать элементы уровня блока, что означает, что вы можете поместить несколько абзацев, списков, блок-записей и т. Д. В сноску. Он работает так же, как и для элементов списка: просто введите абзацы следующие четыре пробела в определении сноски:

That's some text with a footnote.[^1]

[^1]: And that's the footnote.

    That's the second paragraph.
Если вы хотите, чтобы все получилось лучше, вы можете оставить первую строку сноски пустой и поставить свой первый абзац чуть ниже:

[^1]: 
    And that's the footnote.

    That's the second paragraph.
ВЫВОД

Вероятно, это правда, что одна сноска не может удовлетворить всех. Будущая версия может предоставить программный интерфейс, позволяющий создавать разную разметку. Но на сегодняшний день результат следует за тем, что можно увидеть на Daring Fireball , с небольшими изменениями. Вот вывод по умолчанию из первого примера выше:

<p>That's some text with a footnote.
   <sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup></p>

<div class="footnotes">
<hr />
<ol>

<li id="fn-1">
<p>And that's the footnote.
   <a href="#fnref-1" class="footnote-backref">&#8617;</a></p>
</li>

</ol>
</div>
Немного загадочный, но в браузере он будет выглядеть так:

Это текст со сноской. 1

И это сноска. 
Эти class="footnote-ref"и class="footnote-backref">атрибуты по ссылкам выразить свое отношение они имеют с элементами они связываются с. Их можно использовать для стилизации элементов с помощью правил CSS, таких как:

a.footnote-ref { ... }
a.footnote-backref { ... }
Вы можете настроить classи titleатрибуты для сносок ссылки и обратных ссылок. Подробнее см. Ссылку на конфигурацию .

Сокращения

Markdown Extra добавляет поддержку аббревиатур (HTML-тег <abbr>). Как это работает, довольно просто: создайте определение аббревиатуры следующим образом:

*[HTML]: Hyper Text Markup Language
*[W3C]:  World Wide Web Consortium
Затем, в другом месте документа, напишите текст, например:

The HTML specification
is maintained by the W3C.
И любой экземпляр этих слов в тексте станет следующим:

The <abbr title="Hyper Text Markup Language">HTML</abbr> specification
is maintained by the <abbr title="World Wide Web Consortium">W3C</abbr>.
Аббревиатуры чувствительны к регистру и будут охватывать несколько слов, если они определены как таковые. Аббревиатура может также иметь пустое определение, и в этом случае <abbr>теги будут добавлены в текст, но titleатрибут будет опущен.

Operation Tigra Genesis is going well.

*[Tigra Genesis]:
Аббревиатурные определения могут быть в любом месте документа. Они удаляются из окончательного документа.

Упорядоченные списки

Если упорядоченный список начинается с номера, отличного от 1, Markdown Extra будет отмечать это в выводе HTML.

акцент

Правила для акцента слегка изменились с исходного синтаксиса Markdown. С Markdown Extra подчеркивания в середине слова теперь рассматриваются как буквальные символы. Подчеркивание подчеркивает только целые слова. Если вам нужно подчеркнуть только часть слова, это все еще возможно, используя звездочки в качестве маркеров выделения.

Например, при этом:

Please open the folder "secret_magic_box".
Markdown Extra не будет преобразовывать подчеркивания в акцент, потому что они находятся в середине слова. Результат HTML от Markdown Extra выглядит следующим образом:

<p>Please open the folder "secret_magic_box".</p>
Акцент с подчеркиванием все еще работает, пока вы подчеркиваете целые слова следующим образом:

I like it when you say _you love me_.
То же самое относится и к сильному акценту: с помощью Markdown Extra вы больше не можете придавать сильному акценту в середине слова, используя символы подчеркивания, вы должны сделать это, используя звездочки в качестве маркеров выделения.

Сбой обратной косой черты

Markdown Extra добавляет двоеточие ( :) и pipe ( |) в список символов, которые вы можете избежать, используя обратную косую черту. При этом вы можете запретить им запускать список определений или таблицу.

благодаря

Многие идеи, реализованные здесь, обсуждались ранее в списке обсуждения Markdown . Я хочу поблагодарить всех, кто участвовал в этих обсуждениях, а также разработал решения и усовершенствования синтаксиса Markdown.





https://michelf.ca/projects/php-markdown/extra/